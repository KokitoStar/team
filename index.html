<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Kokito</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            background: url('motivos/FONDO.png') center center;
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
        }

        .system-overlay {
            background: rgba(0, 0, 0, 0.8);
            min-height: 100vh;
        }

        .login-background {
            background: url('motivos/FONDO.png') center center;
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
        }

        .debug-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-size: 11px;
            max-width: 350px;
            z-index: 1000;
            border: 2px solid #10b981;
            max-height: 70vh;
            overflow-y: auto;
        }

        .user-credentials {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }

        .export-section {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid #3b82f6;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .sparkle {
            animation: sparkle 2s linear infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.1); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Iconos simples usando texto/emojis
        const Icons = {
            User: () => <span className="text-xl">👤</span>,
            UserPlus: () => <span className="text-xl">👥</span>,
            Package: () => <span className="text-xl">📦</span>,
            TrendingUp: () => <span className="text-xl">📈</span>,
            LogOut: () => <span className="text-xl">🚪</span>,
            Settings: () => <span className="text-xl">⚙️</span>,
            Eye: () => <span className="text-lg">👁️</span>,
            EyeOff: () => <span className="text-lg">🙈</span>,
            Edit: () => <span className="text-lg">✏️</span>,
            Save: () => <span className="text-lg">💾</span>,
            Cancel: () => <span className="text-lg">❌</span>,
            Copy: () => <span className="text-lg">📋</span>,
            Download: () => <span className="text-lg">💾</span>,
            Upload: () => <span className="text-lg">📁</span>,
            Share: () => <span className="text-lg">🔗</span>,
            Calculator: () => <span className="text-xl">🧮</span>,
            Lightbulb: () => <span className="text-xl">💡</span>,
            Sparkles: () => <span className="text-xl">✨</span>,
            Heart: () => <span className="text-xl">💖</span>,
            Star: () => <span className="text-xl">⭐</span>,
            Trophy: () => <span className="text-xl">🏆</span>,
            Child: () => <span className="text-xl">🧒</span>,
            Smile: () => <span className="text-xl">😊</span>,
            Gift: () => <span className="text-xl">🎁</span>,
            Money: () => <span className="text-xl">💰</span>,
            ArrowLeft: () => <span className="text-xl">←</span>
        };

        // Sistema de almacenamiento local mejorado con exportación/importación
        const STORAGE_KEY = 'kokito_users_final';
        
        // Función para obtener usuarios del localStorage
        const getStoredUsers = () => {
            try {
                const stored = localStorage.getItem(STORAGE_KEY);
                if (stored) {
                    const parsed = JSON.parse(stored);
                    console.log('📁 Usuarios cargados desde localStorage:', parsed);
                    return parsed;
                }
            } catch (error) {
                console.warn('⚠️ Error cargando usuarios:', error.message);
            }
            
            // Usuarios por defecto
            const defaultUsers = [
                {
                    id: 1,
                    username: 'estebango001@gmail.com',
                    password: '8357565Jj.',
                    role: 'admin',
                    name: 'Esteban Gómez',
                    phone: '3218526763',
                    active: true,
                    createdAt: new Date().toISOString()
                }
            ];
            console.log('📁 Usando usuarios por defecto:', defaultUsers);
            return defaultUsers;
        };
        
        // Función para guardar usuarios
        const saveUsersToStorage = (usersList) => {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(usersList));
                console.log('💾 Usuarios guardados en localStorage:', usersList.length);
                return true;
            } catch (error) {
                console.warn('⚠️ Error guardando usuarios:', error.message);
                return false;
            }
        };

        const KokitoSystem = () => {
          // Estados principales
          const [currentUser, setCurrentUser] = useState(null);
          const [currentView, setCurrentView] = useState('dashboard'); // dashboard, calculator, tips
          const [showPassword, setShowPassword] = useState(false);
          const [loginForm, setLoginForm] = useState({ username: '', password: '' });
          const [users, setUsers] = useState(() => getStoredUsers());
          const [debugMode, setDebugMode] = useState(false);
          const [loginAttempts, setLoginAttempts] = useState([]);
          const [lastSync, setLastSync] = useState(Date.now());
          
          // Estados para calculadora
          const [tattooCount, setTattooCount] = useState('');
          const [kitsSold, setKitsSold] = useState('');
          
          // Sincronizar con localStorage cuando cambien los usuarios
          useEffect(() => {
            if (users.length > 0) {
              saveUsersToStorage(users);
            }
          }, [users]);
          
          // Estado para crear nuevo usuario
          const [newUser, setNewUser] = useState({
            username: '',
            password: '',
            name: '',
            phone: ''
          });
          
          const [showCreateForm, setShowCreateForm] = useState(false);
          const [loginError, setLoginError] = useState('');
          const [editingUser, setEditingUser] = useState(null);
          const [lastCreatedUser, setLastCreatedUser] = useState(null);

          // Función para calcular comisiones CORREGIDA
          const calculateCommission = (tattoos, kits) => {
            let tattooCommission = 0;
            const tattooNum = parseInt(tattoos) || 0;
            const kitNum = parseInt(kits) || 0;

            // Lógica corregida: desde 30 tatuajes hay comisión base de 10,000
            if (tattooNum >= 30) {
              tattooCommission = 10000; // Comisión base por llegar a 30
              
              if (tattooNum >= 50) {
                // A partir de 50: 20,000 adicionales (total 30,000)
                tattooCommission = 30000;
                
                if (tattooNum >= 60) {
                  // A partir de 60: otros 10,000 adicionales (total 40,000)
                  const extraGroups = Math.floor((tattooNum - 50) / 10);
                  tattooCommission = 30000 + (extraGroups * 10000);
                }
              }
            }

            const kitCommission = kitNum * 5000;
            const totalCommission = tattooCommission + kitCommission;

            return {
              tattooCommission,
              kitCommission,
              totalCommission
            };
          };

          const formatMoney = (amount) => {
            return new Intl.NumberFormat('es-CO', {
              style: 'currency',
              currency: 'COP',
              minimumFractionDigits: 0,
              maximumFractionDigits: 0
            }).format(amount);
          };

          const tips = [
            {
              id: 1,
              category: "Conexión con los niños",
              icon: <Icons.Child />,
              title: "Siempre sonríe y pregunta su nombre",
              description: "La primera impresión es crucial. Una sonrisa genuina y conocer el nombre del niño crea una conexión especial desde el primer momento.",
              color: "from-pink-500 to-purple-500"
            },
            {
              id: 2,
              category: "Actitud Profesional",
              icon: <Icons.Smile />,
              title: "Mantén siempre buena actitud",
              description: "Tu energía positiva es contagiosa. Los niños y padres perciben tu entusiasmo y eso se refleja en las ventas.",
              color: "from-blue-500 to-teal-500"
            },
            {
              id: 3,
              category: "Estrategia de Marketing",
              icon: <Icons.Gift />,
              title: "Entrega publicidad - ¡La clave del éxito!",
              description: "Los puntos que más publicidad reparten son los que mejor venden. Entrega volantes con motivos y precios a todos los visitantes.",
              color: "from-green-500 to-emerald-500"
            },
            {
              id: 4,
              category: "Relación con los padres",
              icon: <Icons.Heart />,
              title: "Sonríe a los padres y haz preguntas",
              description: "Pregunta si ya conocían Kokito. Si dicen que sí, pregúntales dónde y cómo fue su experiencia. Esto crea confianza.",
              color: "from-orange-500 to-red-500"
            },
            {
              id: 5,
              category: "Empatía y Paciencia",
              icon: <Icons.Sparkles />,
              title: "Demuestra amor y paciencia",
              description: "Recuerda que esos niños son el tesoro de los adultos que los acompañan. Trátalos con el amor que te gustaría para tus propios hijos.",
              color: "from-purple-500 to-pink-500"
            },
            {
              id: 6,
              category: "Caso de Éxito",
              icon: <Icons.Trophy />,
              title: "Estrategia comprobada: Volantes",
              description: "La estrategia que mejor funciona es entregar el volante de motivos y precios. ¡Los datos lo confirman!",
              color: "from-yellow-500 to-orange-500"
            }
          ];

          // Función de login
          const handleLogin = () => {
            const attemptTime = new Date().toLocaleTimeString();
            
            if (!loginForm.username || !loginForm.password) {
              setLoginError('Por favor ingresa usuario y contraseña');
              return;
            }
            
            console.log(`🔐 [${attemptTime}] Intento de login:`, {
              username: loginForm.username,
              password: '***',
              totalUsers: users.length
            });
            
            // Buscar usuario - comparación exacta primero, luego case insensitive
            let user = users.find(u => 
              u.username === loginForm.username && 
              u.password === loginForm.password &&
              u.active
            );
            
            if (!user) {
              // Intentar con case insensitive
              user = users.find(u => 
                u.username.toLowerCase() === loginForm.username.toLowerCase() && 
                u.password === loginForm.password &&
                u.active
              );
            }
            
            const attempt = {
              time: attemptTime,
              username: loginForm.username,
              success: !!user,
              userFound: !!users.find(u => u.username.toLowerCase() === loginForm.username.toLowerCase()),
              activeUser: !!users.find(u => u.username.toLowerCase() === loginForm.username.toLowerCase() && u.active),
              passwordMatch: !!users.find(u => u.username.toLowerCase() === loginForm.username.toLowerCase() && u.password === loginForm.password),
              totalUsersAtLogin: users.length
            };
            
            setLoginAttempts(prev => [attempt, ...prev].slice(0, 10));
            
            if (user) {
              setCurrentUser(user);
              setLoginError('');
              setLoginForm({ username: '', password: '' });
              setCurrentView('dashboard'); // Reset view al hacer login
              console.log('✅ Login exitoso para:', user.name);
            } else {
              const errorMsg = `Usuario o contraseña incorrectos. Usuarios en sistema: ${users.length}`;
              setLoginError(errorMsg);
              console.log('❌ Login fallido:', errorMsg);
            }
          };

          // Función de logout
          const handleLogout = () => {
            console.log('🚪 Cerrando sesión de:', currentUser?.name);
            setCurrentUser(null);
            setCurrentView('dashboard');
            setLoginForm({ username: '', password: '' });
            setLoginError('');
          };

          // Función para crear usuario
          const handleCreateUser = () => {
            if (!newUser.username || !newUser.password || !newUser.name || !newUser.phone) {
              alert('Por favor completa todos los campos');
              return;
            }
            
            // Verificar usuario duplicado
            if (users.find(u => u.username.toLowerCase() === newUser.username.toLowerCase())) {
              alert('Este nombre de usuario ya existe');
              return;
            }
            
            if (newUser.password.length < 6) {
              alert('La contraseña debe tener al menos 6 caracteres');
              return;
            }
            
            const userToAdd = {
              id: users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1,
              username: newUser.username,
              password: newUser.password,
              role: 'user',
              name: newUser.name,
              phone: newUser.phone,
              active: true,
              createdAt: new Date().toISOString()
            };
            
            console.log('➕ Creando usuario:', userToAdd);
            
            const newUsersList = [...users, userToAdd];
            setUsers(newUsersList);
            
            setLastCreatedUser(userToAdd);
            setNewUser({ username: '', password: '', name: '', phone: '' });
            setShowCreateForm(false);
            
            alert(`✅ Usuario creado exitosamente!

CREDENCIALES EXACTAS PARA COMPARTIR:
👤 Usuario: ${userToAdd.username}
🔑 Contraseña: ${userToAdd.password}
📱 Nombre: ${userToAdd.name}
📞 Teléfono: ${userToAdd.phone}

⚠️ IMPORTANTE: 
• Para que pueda acceder desde otro dispositivo, debes EXPORTAR los usuarios
• Usa el botón "📤 Exportar Usuarios" en el panel de admin
• Envía el archivo a ${userToAdd.name} para que lo importe en su dispositivo`);
          };

          // Función para copiar credenciales
          const copyCredentials = (user) => {
            const credentials = `Usuario: ${user.username}\nContraseña: ${user.password}`;
            navigator.clipboard.writeText(credentials).then(() => {
              alert('Credenciales copiadas al portapapeles');
            }).catch(() => {
              prompt('Copia estas credenciales:', credentials);
            });
          };

          // Función para exportar usuarios
          const exportUsers = () => {
            const dataToExport = {
              users: users,
              exportDate: new Date().toISOString(),
              version: "1.0"
            };
            
            const dataStr = JSON.stringify(dataToExport, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `kokito-usuarios-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            alert(`📤 Usuarios exportados exitosamente!

📁 Archivo descargado: kokito-usuarios-${new Date().toISOString().split('T')[0]}.json

📱 INSTRUCCIONES para compartir:
1. Envía este archivo a tus colaboradores por WhatsApp/Email
2. Ellos deben abrir el sistema Kokito en su dispositivo
3. Hacer clic en "📥 Importar Usuarios" 
4. Seleccionar el archivo que les enviaste
5. ¡Ya pueden acceder con sus credenciales!`);
          };

          // Función para importar usuarios
          const importUsers = (event) => {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (e) => {
              try {
                const importedData = JSON.parse(e.target.result);
                
                if (importedData.users && Array.isArray(importedData.users)) {
                  setUsers(importedData.users);
                  setLastSync(Date.now());
                  alert(`✅ Usuarios importados exitosamente!
                  
📊 Importados: ${importedData.users.length} usuarios
📅 Fecha de exportación: ${new Date(importedData.exportDate).toLocaleString()}

🎉 Ya puedes iniciar sesión con tus credenciales.`);
                } else {
                  alert('❌ Archivo inválido. Por favor selecciona un archivo de usuarios válido.');
                }
              } catch (error) {
                alert('❌ Error leyendo el archivo. Asegúrate de que sea un archivo JSON válido.');
              }
            };
            reader.readAsText(file);
            
            // Limpiar el input
            event.target.value = '';
          };

          // Función para generar enlace de compartir
          const generateShareLink = () => {
            const userData = btoa(JSON.stringify({
              users: users,
              timestamp: Date.now()
            }));
            
            const currentUrl = window.location.href.split('?')[0];
            const shareUrl = `${currentUrl}?data=${userData}`;
            
            navigator.clipboard.writeText(shareUrl).then(() => {
              alert(`🔗 Enlace de usuarios copiado al portapapeles!

📱 INSTRUCCIONES:
1. Comparte este enlace con tus colaboradores
2. Al abrir el enlace, los usuarios se cargarán automáticamente
3. Ya pueden iniciar sesión

⚠️ NOTA: El enlace puede ser muy largo, es recomendable usar la opción de exportar archivo.`);
            }).catch(() => {
              prompt('Copia este enlace para compartir:', shareUrl);
            });
          };

          // Cargar datos del enlace si existe
          useEffect(() => {
            const urlParams = new URLSearchParams(window.location.search);
            const dataParam = urlParams.get('data');
            
            if (dataParam) {
              try {
                const decodedData = JSON.parse(atob(dataParam));
                if (decodedData.users && Array.isArray(decodedData.users)) {
                  setUsers(decodedData.users);
                  alert('✅ Usuarios cargados desde enlace compartido!');
                }
              } catch (error) {
                console.error('Error cargando datos del enlace:', error);
              }
            }
          }, []);

          // Funciones de administración (eliminar, editar, etc.)
          const handleDeleteUser = (userId) => {
            if (userId === 1) {
              alert('No puedes eliminar al administrador principal');
              return;
            }
            
            if (window.confirm('¿Estás seguro de eliminar este usuario?')) {
              const newUsersList = users.filter(u => u.id !== userId);
              setUsers(newUsersList);
              console.log('🗑️ Usuario eliminado. Nueva lista:', newUsersList);
            }
          };

          const toggleUserStatus = (userId) => {
            if (userId === 1) {
              alert('No puedes desactivar al administrador principal');
              return;
            }
            
            const newUsersList = users.map(user => 
              user.id === userId 
                ? { ...user, active: !user.active }
                : user
            );
            setUsers(newUsersList);
            console.log('🔄 Estado de usuario cambiado:', newUsersList);
          };

          const startEditUser = (user) => {
            setEditingUser({...user, newPassword: ''});
          };

          const saveEditUser = () => {
            if (!editingUser.name || !editingUser.phone || !editingUser.username) {
              alert('Por favor completa todos los campos obligatorios');
              return;
            }

            if (editingUser.newPassword && editingUser.newPassword.length < 6) {
              alert('La contraseña debe tener al menos 6 caracteres');
              return;
            }

            const existingUser = users.find(u => 
              u.username.toLowerCase() === editingUser.username.toLowerCase() && 
              u.id !== editingUser.id
            );
            if (existingUser) {
              alert('Este nombre de usuario ya existe');
              return;
            }

            const updatedUser = {
              ...editingUser,
              password: editingUser.newPassword || editingUser.password
            };
            delete updatedUser.newPassword;

            const newUsersList = users.map(user => 
              user.id === editingUser.id ? updatedUser : user
            );
            setUsers(newUsersList);
            
            if (currentUser && currentUser.id === editingUser.id) {
              setCurrentUser(updatedUser);
            }
            
            setEditingUser(null);
            alert('Usuario actualizado exitosamente');
          };

          const cancelEdit = () => {
            setEditingUser(null);
          };

          // Componente para Calculadora de Comisiones
          // Reemplaza solo la función CalculatorView en tu código existente

// REEMPLAZO COMPLETO de la función CalculatorView - Incluye solución definitiva

const CalculatorView = () => {
  const result = calculateCommission(tattooCount, kitsSold);
  
  // Funciones locales para manejar el cambio de valores
  const handleTattooChange = (e) => {
    const value = e.target.value;
    // Permitir solo números y string vacío
    if (value === '' || /^\d+$/.test(value)) {
      setTattooCount(value);
    }
  };

  const handleKitChange = (e) => {
    const value = e.target.value;
    // Permitir solo números y string vacío
    if (value === '' || /^\d+$/.test(value)) {
      setKitsSold(value);
    }
  };
  
  return (
    <div className="space-y-6">
      {/* Header con animación */}
      <div className="text-center mb-8">
        <div className="inline-flex items-center justify-center space-x-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full px-8 py-4 mb-4">
          <span className="text-3xl animate-bounce">🧮</span>
          <h2 className="text-3xl font-bold text-white">Calculadora de Comisiones</h2>
          <span className="text-3xl animate-pulse">💰</span>
        </div>
        <p className="text-gray-300 text-lg">Calcula tus ganancias del día de forma fácil y rápida</p>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        {/* Panel de Entrada */}
        <div className="space-y-6">
          {/* Input Tatuajes */}
          <div className="bg-gradient-to-br from-purple-900/50 to-pink-900/50 backdrop-blur-sm border-2 border-purple-500/50 rounded-2xl p-6 hover:border-purple-400 transition-all duration-300">
            <label className="block text-white text-lg font-semibold mb-4 flex items-center space-x-2">
              <span className="text-2xl">🎨</span>
              <span>Tatuajes realizados hoy</span>
            </label>
            <div className="relative">
              <input
                type="tel"
                value={tattooCount}
                onChange={handleTattooChange}
                className="w-full p-6 text-3xl font-bold text-center bg-black/60 border-2 border-purple-600/50 rounded-xl text-white focus:outline-none focus:border-purple-400 focus:ring-4 focus:ring-purple-400/20 transition-all duration-300 placeholder-gray-400"
                placeholder="0"
                autoComplete="off"
                maxLength="3"
              />
              <div className="absolute inset-0 bg-gradient-to-r from-purple-600/10 to-pink-600/10 rounded-xl pointer-events-none"></div>
            </div>
            <div className="mt-3 text-center">
              <span className="text-sm text-gray-400">
                {tattooCount ? `${tattooCount} tatuajes ingresados` : 'Cada tatuaje cuenta para tu comisión'}
              </span>
            </div>
          </div>

          {/* Input Kits */}
          <div className="bg-gradient-to-br from-green-900/50 to-emerald-900/50 backdrop-blur-sm border-2 border-green-500/50 rounded-2xl p-6 hover:border-green-400 transition-all duration-300">
            <label className="block text-white text-lg font-semibold mb-4 flex items-center space-x-2">
              <span className="text-2xl">📦</span>
              <span>Kits vendidos hoy</span>
            </label>
            <div className="relative">
              <input
                type="tel"
                value={kitsSold}
                onChange={handleKitChange}
                className="w-full p-6 text-3xl font-bold text-center bg-black/60 border-2 border-green-600/50 rounded-xl text-white focus:outline-none focus:border-green-400 focus:ring-4 focus:ring-green-400/20 transition-all duration-300 placeholder-gray-400"
                placeholder="0"
                autoComplete="off"
                maxLength="2"
              />
              <div className="absolute inset-0 bg-gradient-to-r from-green-600/10 to-emerald-600/10 rounded-xl pointer-events-none"></div>
            </div>
            <div className="mt-3 text-center">
              <span className="text-sm text-gray-400">
                {kitsSold ? `${kitsSold} kits = ${formatMoney(parseInt(kitsSold) * 5000)}` : '$5.000 por cada kit vendido'}
              </span>
            </div>
          </div>
        </div>

        {/* Panel de Resultados */}
        <div className="space-y-6">
          {/* Comisión por Tatuajes */}
          <div className="bg-gradient-to-br from-yellow-900/50 to-orange-900/50 backdrop-blur-sm border-2 border-yellow-500/50 rounded-2xl p-6 transform hover:scale-105 transition-all duration-300">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-white font-bold text-lg flex items-center space-x-2">
                <span className="text-2xl">🎨</span>
                <span>Comisión Tatuajes</span>
              </h3>
              <span className="text-yellow-400 text-sm font-medium">
                {parseInt(tattooCount) || 0} tatuajes
              </span>
            </div>
            <div className="text-center">
              <p className="text-4xl font-bold text-yellow-300 mb-2 animate-pulse">
                {formatMoney(result.tattooCommission)}
              </p>
              <div className="w-full bg-gray-700 rounded-full h-2">
                <div 
                  className="bg-gradient-to-r from-yellow-400 to-orange-400 h-2 rounded-full transition-all duration-1000"
                  style={{ width: `${Math.min((parseInt(tattooCount) || 0) / 100 * 100, 100)}%` }}
                ></div>
              </div>
            </div>
          </div>

          {/* Comisión por Kits */}
          <div className="bg-gradient-to-br from-green-900/50 to-emerald-900/50 backdrop-blur-sm border-2 border-green-500/50 rounded-2xl p-6 transform hover:scale-105 transition-all duration-300">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-white font-bold text-lg flex items-center space-x-2">
                <span className="text-2xl">📦</span>
                <span>Comisión Kits</span>
              </h3>
              <span className="text-green-400 text-sm font-medium">
                {parseInt(kitsSold) || 0} kits
              </span>
            </div>
            <div className="text-center">
              <p className="text-4xl font-bold text-green-300 mb-2 animate-pulse">
                {formatMoney(result.kitCommission)}
              </p>
              <div className="w-full bg-gray-700 rounded-full h-2">
                <div 
                  className="bg-gradient-to-r from-green-400 to-emerald-400 h-2 rounded-full transition-all duration-1000"
                  style={{ width: `${Math.min((parseInt(kitsSold) || 0) / 10 * 100, 100)}%` }}
                ></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Total Grande y Llamativo */}
      <div className="relative overflow-hidden">
        <div className="bg-gradient-to-r from-pink-600 via-purple-600 to-indigo-600 rounded-3xl p-8 text-center relative z-10">
          <div className="absolute inset-0 bg-gradient-to-r from-pink-600/20 via-purple-600/20 to-indigo-600/20 animate-pulse"></div>
          <div className="relative z-20">
            <div className="flex items-center justify-center space-x-4 mb-4">
              <span className="text-4xl animate-bounce">💰</span>
              <h3 className="text-2xl font-bold text-white">Total de Comisiones</h3>
              <span className="text-4xl animate-bounce" style={{ animationDelay: '0.2s' }}>✨</span>
            </div>
            <p className="text-6xl font-bold text-white mb-4 animate-pulse">
              {formatMoney(result.totalCommission)}
            </p>
            {result.totalCommission > 0 ? (
              <div className="space-y-2">
                <p className="text-white/90 text-lg">
                  🎉 ¡Excelente trabajo! Estas son tus ganancias del día
                </p>
                <div className="flex items-center justify-center space-x-6 text-sm text-white/80">
                  <span>Tatuajes: {formatMoney(result.tattooCommission)}</span>
                  <span>•</span>
                  <span>Kits: {formatMoney(result.kitCommission)}</span>
                </div>
              </div>
            ) : (
              <p className="text-white/90 text-lg">
                Ingresa los números para calcular tus comisiones
              </p>
            )}
          </div>
        </div>
      </div>

      {/* Tabla de Escala Mejorada */}
      <div className="bg-gradient-to-br from-gray-900/80 to-black/60 backdrop-blur-sm border border-gray-600/50 rounded-2xl overflow-hidden">
        <div className="bg-gradient-to-r from-purple-600 to-pink-600 p-4">
          <h3 className="text-white font-bold text-xl flex items-center space-x-2">
            <span className="text-2xl">📊</span>
            <span>Escala de Comisiones</span>
          </h3>
        </div>
        
        <div className="p-6">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {/* Comisiones por Tatuajes */}
            <div>
              <h4 className="text-white font-semibold mb-4 flex items-center space-x-2">
                <span className="text-xl">🎨</span>
                <span>Por Tatuajes</span>
              </h4>
              <div className="space-y-3">
                {[
                  { range: "30-49 tatuajes", amount: "$10.000", color: "from-yellow-500 to-orange-500", active: parseInt(tattooCount) >= 30 && parseInt(tattooCount) <= 49 },
                  { range: "50-59 tatuajes", amount: "$30.000", color: "from-orange-500 to-red-500", active: parseInt(tattooCount) >= 50 && parseInt(tattooCount) <= 59 },
                  { range: "60-69 tatuajes", amount: "$40.000", color: "from-red-500 to-pink-500", active: parseInt(tattooCount) >= 60 && parseInt(tattooCount) <= 69 },
                  { range: "+10 adicionales", amount: "+$10.000", color: "from-pink-500 to-purple-500", active: parseInt(tattooCount) >= 70 }
                ].map((item, index) => (
                  <div key={index} className={`flex items-center justify-between p-3 rounded-lg border transition-all duration-300 ${
                    item.active 
                      ? 'bg-gradient-to-r from-green-600/30 to-emerald-600/30 border-green-500/50 shadow-lg shadow-green-500/20' 
                      : 'bg-gray-800/50 border-gray-700/50'
                  }`}>
                    <span className="text-gray-300">{item.range}</span>
                    <div className="flex items-center space-x-2">
                      {item.active && <span className="text-green-400 text-sm">✓ Activo</span>}
                      <span className={`font-bold text-transparent bg-clip-text bg-gradient-to-r ${item.color}`}>
                        {item.amount}
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Comisiones por Kits */}
            <div>
              <h4 className="text-white font-semibold mb-4 flex items-center space-x-2">
                <span className="text-xl">📦</span>
                <span>Por Kits</span>
              </h4>
              <div className="space-y-3">
                <div className="flex items-center justify-between p-3 bg-green-900/30 rounded-lg border border-green-500/30">
                  <span className="text-gray-300">Cada kit vendido</span>
                  <span className="font-bold text-green-400">$5.000</span>
                </div>
                <div className="p-4 bg-gradient-to-r from-green-600/20 to-emerald-600/20 rounded-lg border border-green-500/30">
                  <p className="text-green-300 text-sm text-center">
                    💡 <strong>Tip:</strong> Los kits son ganancia extra garantizada
                  </p>
                </div>
                {parseInt(kitsSold) > 0 && (
                  <div className="p-3 bg-gradient-to-r from-green-600/40 to-emerald-600/40 rounded-lg border border-green-400/50">
                    <p className="text-white text-center font-semibold">
                      🎯 {kitsSold} kits = {formatMoney(parseInt(kitsSold) * 5000)}
                    </p>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Mensaje Motivacional */}
      {result.totalCommission > 0 && (
        <div className="text-center">
          <div className="inline-block bg-gradient-to-r from-yellow-600/20 to-orange-600/20 border border-yellow-500/50 rounded-full px-8 py-4">
            <p className="text-yellow-300 font-semibold flex items-center space-x-2">
              <span className="text-2xl animate-spin">⭐</span>
              <span>¡Sigue así! Cada tatuaje te acerca más a tu meta</span>
              <span className="text-2xl animate-spin" style={{ animationDelay: '1s' }}>⭐</span>
            </p>
          </div>
        </div>
      )}

      {/* Debug Info */}
      <div className="text-center text-xs text-gray-500">
        Debug: Tatuajes={tattooCount || '0'} | Kits={kitsSold || '0'} | Total={formatMoney(result.totalCommission)}
      </div>
    </div>
  );
};

          // Componente para Tips de Venta
          const TipsView = () => (
            <div className="space-y-6">
              <div className="bg-gray-900 border-2 border-yellow-600 rounded-lg p-6 text-center">
                <div className="flex items-center justify-center space-x-3 mb-4">
                  <Icons.Lightbulb />
                  <h2 className="text-2xl font-bold text-white">Tips de Venta Kokito</h2>
                  <div className="sparkle">
                    <Icons.Sparkles />
                  </div>
                </div>
                <p className="text-gray-300">Consejos probados para maximizar tus ventas de tatuajes temporales</p>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {tips.map((tip) => (
                  <div key={tip.id} className="bg-gray-900 border border-gray-700 rounded-lg p-6 hover:bg-gray-800 transition-colors">
                    <div className={`bg-gradient-to-r ${tip.color} rounded-lg p-4 mb-4`}>
                      <div className="flex items-center space-x-3">
                        {tip.icon}
                        <div>
                          <p className="text-white text-xs font-medium opacity-90">{tip.category}</p>
                          <h3 className="text-white text-lg font-bold">{tip.title}</h3>
                        </div>
                      </div>
                    </div>
                    <p className="text-gray-300 text-sm leading-relaxed">{tip.description}</p>
                  </div>
                ))}
              </div>

              {/* Mensaje motivacional */}
              <div className="bg-gray-900 border-2 border-yellow-600 rounded-lg p-6 text-center">
                <div className="sparkle mb-3">
                  <Icons.Star />
                </div>
                <h3 className="text-xl font-bold text-white mb-2">¡Recuerda!</h3>
                <p className="text-gray-300">
                  Cada niño que visita tu punto es especial. Con amor, paciencia y una gran sonrisa, 
                  no solo vendes tatuajes, ¡creas momentos mágicos! ✨
                </p>
              </div>
            </div>
          );

          // Pantalla de Login
          if (!currentUser) {
            return (
              <div className="login-background">
                <div className="min-h-screen flex flex-col items-center justify-center p-4" style={{background: 'rgba(0, 0, 0, 0.8)'}}>
                  {/* Panel de debug */}
                  {debugMode && (
                    <div className="debug-panel">
                      <div><strong>🐛 DEBUG - SISTEMA KOKITO FINAL</strong></div>
                      <hr className="my-2 border-gray-600" />
                      
                      <div><strong>📊 Estado del Sistema:</strong></div>
                      <div>• Total usuarios: {users.length}</div>
                      <div>• Usuarios activos: {users.filter(u => u.active).length}</div>
                      <div>• Almacenamiento: 💾 localStorage</div>
                      <div>• Sincronización: 📤📥 Exportar/Importar</div>
                      <div>• Última actualización: {new Date(lastSync).toLocaleTimeString()}</div>
                      
                      <hr className="my-2 border-gray-600" />
                      <div><strong>👥 Lista de Usuarios:</strong></div>
                      {users.map(user => (
                        <div key={user.id} className="text-xs bg-gray-800 p-2 rounded my-1">
                          <div><strong>{user.name}</strong> ({user.role})</div>
                          <div>User: {user.username}</div>
                          <div>Pass: {user.password}</div>
                          <div>Estado: {user.active ? '🟢 Activo' : '🔴 Inactivo'}</div>
                          {user.createdAt && <div>Creado: {new Date(user.createdAt).toLocaleString()}</div>}
                        </div>
                      ))}
                      
                      {loginAttempts.length > 0 && (
                        <>
                          <hr className="my-2 border-gray-600" />
                          <div><strong>🔐 Últimos Intentos de Login:</strong></div>
                          {loginAttempts.slice(0, 3).map((attempt, index) => (
                            <div key={index} className="text-xs bg-gray-800 p-2 rounded my-1">
                              <div>{attempt.time} - {attempt.username}</div>
                              <div>{attempt.success ? '✅ Exitoso' : '❌ Fallido'}</div>
                            </div>
                          ))}
                        </>
                      )}
                    </div>
                  )}

                  {/* Logo Section */}
                  <div className="mb-8">
                    <div className="w-80 h-40 bg-gradient-to-r from-pink-600 to-purple-600 rounded-lg flex items-center justify-center mb-4">
                      <img 
                        src="motivos/LOGO_KOKITO.png" 
                        alt="KOKITO" 
                        className="w-72 h-36 object-contain"
                        onError={(e) => {
                          e.target.style.display = 'none';
                          e.target.nextSibling.style.display = 'block';
                        }}
                      />
                      <span className="text-white text-4xl font-bold" style={{display: 'none'}}>KOKITO</span>
                    </div>
                  </div>

                  {/* Login Form */}
                  <div className="bg-gray-900 p-8 rounded-lg border-2 border-pink-600 w-full max-w-md">
                    <h2 className="text-white text-2xl font-bold text-center mb-6">
                      Sistema Kokito 📤📥
                    </h2>
                    
                    <div className="space-y-4">
                      <div>
                        <label className="block text-white text-sm font-medium mb-2">
                          Usuario
                        </label>
                        <input
                          type="text"
                          value={loginForm.username}
                          onChange={(e) => setLoginForm({...loginForm, username: e.target.value})}
                          className="w-full p-3 bg-black border-2 border-pink-600 rounded-lg text-white focus:outline-none focus:border-purple-500"
                          placeholder="Ingresa tu usuario"
                        />
                      </div>
                      
                      <div>
                        <label className="block text-white text-sm font-medium mb-2">
                          Contraseña
                        </label>
                        <div className="relative">
                          <input
                            type={showPassword ? "text" : "password"}
                            value={loginForm.password}
                            onChange={(e) => setLoginForm({...loginForm, password: e.target.value})}
                            onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                            className="w-full p-3 bg-black border-2 border-pink-600 rounded-lg text-white focus:outline-none focus:border-purple-500 pr-12"
                            placeholder="Ingresa tu contraseña"
                          />
                          <button
                            type="button"
                            onClick={() => setShowPassword(!showPassword)}
                            className="absolute right-3 top-3 text-gray-400 hover:text-white"
                          >
                            {showPassword ? <Icons.EyeOff /> : <Icons.Eye />}
                          </button>
                        </div>
                      </div>
                      
                      {loginError && (
                        <div className="text-red-400 text-sm text-center bg-red-900/20 p-2 rounded">
                          {loginError}
                        </div>
                      )}
                      
                      <button
                        onClick={handleLogin}
                        className="w-full bg-gradient-to-r from-pink-600 to-purple-600 text-white py-3 rounded-lg font-medium hover:from-pink-700 hover:to-purple-700 transition-all duration-300"
                      >
                        Iniciar Sesión
                      </button>

                      {/* Sección de importar usuarios */}
                      <div className="export-section">
                        <h4 className="text-blue-300 font-bold mb-2 flex items-center">
                          <Icons.Upload />
                          <span className="ml-2">¿Tienes un archivo de usuarios?</span>
                        </h4>
                        <input
                          type="file"
                          accept=".json"
                          onChange={importUsers}
                          className="w-full p-2 bg-gray-800 border border-blue-500 rounded text-white text-sm"
                        />
                        <p className="text-blue-200 text-xs mt-2">
                          Selecciona el archivo .json que te envió el administrador
                        </p>
                      </div>

                      <button
                        onClick={() => setDebugMode(!debugMode)}
                        className="w-full bg-gray-700 text-white py-2 rounded-lg text-sm"
                      >
                        {debugMode ? '🙈 Ocultar Debug' : '🐛 Mostrar Debug'}
                      </button>
                      
                      <div className="text-center text-xs text-gray-400">
                        Usuarios en sistema: {users.length} | Sistema local con exportación
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // Panel de Administrador
          if (currentUser.role === 'admin') {
            return (
              <div className="system-overlay">
                <div className="min-h-screen text-white">
                  {/* Header */}
                  <header className="bg-gray-900 border-b-2 border-pink-600 p-4">
                    <div className="max-w-6xl mx-auto flex justify-between items-center">
                      <div className="flex items-center space-x-4">
                        <div className="w-12 h-12 bg-gradient-to-r from-pink-600 to-purple-600 rounded-lg flex items-center justify-center">
                          <span className="text-white font-bold text-sm">K</span>
                        </div>
                        <div>
                          <h1 className="text-xl font-bold">Panel de Administración</h1>
                          <p className="text-gray-400 text-sm">Bienvenido, {currentUser.name}</p>
                        </div>
                      </div>
                      
                      <div className="flex items-center space-x-4">
                        <button
                          onClick={() => setDebugMode(!debugMode)}
                          className="bg-gray-600 hover:bg-gray-700 px-3 py-2 rounded-lg text-sm"
                        >
                          🐛 Debug
                        </button>
                        <button
                          onClick={handleLogout}
                          className="flex items-center space-x-2 bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors"
                        >
                          <Icons.LogOut />
                          <span>Cerrar Sesión</span>
                        </button>
                      </div>
                    </div>
                  </header>

                  {/* Panel de debug para admin */}
                  {debugMode && (
                    <div className="bg-blue-900/30 border border-blue-500 p-4 m-4">
                      <h4 className="font-bold text-blue-300">🐛 Panel de Debug - Sistema Final</h4>
                      <div className="text-sm mt-2 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                          <strong>Estado del Sistema:</strong>
                          <div>Total usuarios: {users.length}</div>
                          <div>Almacenamiento: 💾 localStorage</div>
                          <div>Sincronización: 📤📥 Exportar/Importar</div>
                          <div>Último creado: {lastCreatedUser?.name || 'Ninguno'}</div>
                        </div>
                        <div>
                          <strong>Acciones:</strong>
                          <div className="space-x-2 mt-1">
                            <button 
                              onClick={exportUsers}
                              className="bg-blue-600 text-white px-3 py-1 rounded text-xs"
                            >
                              📤 Exportar
                            </button>
                            <button 
                              onClick={generateShareLink}
                              className="bg-green-600 text-white px-3 py-1 rounded text-xs"
                            >
                              🔗 Enlace
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  )}

                  <div className="max-w-6xl mx-auto p-6">
                    {/* Estadísticas */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                      <div className="bg-gray-900 border-2 border-pink-600 rounded-lg p-6">
                        <div className="flex items-center justify-between">
                          <div>
                            <p className="text-gray-400 text-sm">Total Usuarios</p>
                            <p className="text-2xl font-bold">{users.filter(u => u.role === 'user').length}</p>
                          </div>
                          <div className="text-pink-600 text-3xl">
                            <Icons.User />
                          </div>
                        </div>
                      </div>
                      
                      <div className="bg-gray-900 border-2 border-purple-600 rounded-lg p-6">
                        <div className="flex items-center justify-between">
                          <div>
                            <p className="text-gray-400 text-sm">Usuarios Activos</p>
                            <p className="text-2xl font-bold">{users.filter(u => u.active).length}</p>
                          </div>
                          <div className="text-purple-600 text-3xl">
                            <Icons.Settings />
                          </div>
                        </div>
                      </div>
                      
                      <div className="bg-gray-900 border-2 border-blue-600 rounded-lg p-6">
                        <div className="flex items-center justify-between">
                          <div>
                            <p className="text-gray-400 text-sm">Total Sistema</p>
                            <p className="text-2xl font-bold">{users.length}</p>
                          </div>
                          <div className="text-blue-600 text-3xl">
                            <Icons.UserPlus />
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Botones de Acción */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                      <button
                        onClick={() => setShowCreateForm(!showCreateForm)}
                        className="bg-gradient-to-r from-pink-600 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:from-pink-700 hover:to-purple-700 transition-all duration-300 flex items-center space-x-2"
                      >
                        <Icons.UserPlus />
                        <span>Crear Usuario</span>
                      </button>

                      <button
                        onClick={exportUsers}
                        className="bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 flex items-center space-x-2"
                      >
                        <Icons.Download />
                        <span>Exportar Usuarios</span>
                      </button>

                      <button
                        onClick={generateShareLink}
                        className="bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-3 rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 transition-all duration-300 flex items-center space-x-2"
                      >
                        <Icons.Share />
                        <span>Generar Enlace</span>
                      </button>
                    </div>

                    {/* Información importante */}
                    <div className="export-section mb-6">
                      <h3 className="text-blue-300 font-bold mb-3 flex items-center">
                        <Icons.Share />
                        <span className="ml-2">📱 Cómo Compartir Usuarios con Otros Dispositivos</span>
                      </h3>
                      <div className="text-blue-200 text-sm space-y-2">
                        <p><strong>Opción 1 - Exportar Archivo (Recomendado):</strong></p>
                        <ol className="list-decimal list-inside space-y-1 ml-4">
                          <li>Haz clic en "📤 Exportar Usuarios"</li>
                          <li>Envía el archivo .json a tus colaboradores por WhatsApp/Email</li>
                          <li>Ellos abren el sistema en su dispositivo</li>
                          <li>Importan el archivo usando "📥 Importar Usuarios"</li>
                          <li>¡Ya pueden acceder con sus credenciales!</li>
                        </ol>
                        
                        <p className="mt-3"><strong>Opción 2 - Enlace Directo:</strong></p>
                        <ol className="list-decimal list-inside space-y-1 ml-4">
                          <li>Haz clic en "🔗 Generar Enlace"</li>
                          <li>Comparte el enlace generado</li>
                          <li>Al abrir el enlace, los usuarios se cargan automáticamente</li>
                        </ol>
                      </div>
                    </div>

                    {/* Mostrar último usuario creado */}
                    {lastCreatedUser && (
                      <div className="bg-green-900/20 border-2 border-green-600 rounded-lg p-4 mb-6">
                        <h4 className="text-green-400 font-bold flex items-center space-x-2">
                          <span>🎉</span>
                          <span>Último Usuario Creado</span>
                        </h4>
                        <div className="user-credentials mt-2">
                          <div><strong>Nombre:</strong> {lastCreatedUser.name}</div>
                          <div><strong>Usuario:</strong> {lastCreatedUser.username}</div>
                          <div><strong>Contraseña:</strong> {lastCreatedUser.password}</div>
                          <div><strong>Teléfono:</strong> {lastCreatedUser.phone}</div>
                          <div className="mt-2 space-x-2">
                            <button 
                              onClick={() => copyCredentials(lastCreatedUser)}
                              className="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm flex items-center space-x-2"
                            >
                              <Icons.Copy />
                              <span>Copiar Credenciales</span>
                            </button>
                          </div>
                        </div>
                      </div>
                    )}

                    {/* Formulario Crear Usuario */}
                    {showCreateForm && (
                      <div className="bg-gray-900 border-2 border-pink-600 rounded-lg p-6 mb-8">
                        <h3 className="text-xl font-bold mb-4">Crear Nuevo Colaborador</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div>
                            <label className="block text-sm font-medium mb-2">Nombre Completo</label>
                            <input
                              type="text"
                              value={newUser.name}
                              onChange={(e) => setNewUser({...newUser, name: e.target.value})}
                              className="w-full p-3 bg-black border-2 border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-600"
                              placeholder="Ej: Juan Pérez"
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium mb-2">Teléfono</label>
                            <input
                              type="tel"
                              value={newUser.phone}
                              onChange={(e) => setNewUser({...newUser, phone: e.target.value})}
                              className="w-full p-3 bg-black border-2 border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-600"
                              placeholder="Ej: 3001234567"
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium mb-2">Usuario (Email)</label>
                            <input
                              type="email"
                              value={newUser.username}
                              onChange={(e) => setNewUser({...newUser, username: e.target.value})}
                              className="w-full p-3 bg-black border-2 border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-600"
                              placeholder="Ej: correo@ejemplo.com"
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium mb-2">Contraseña</label>
                            <input
                              type="password"
                              value={newUser.password}
                              onChange={(e) => setNewUser({...newUser, password: e.target.value})}
                              className="w-full p-3 bg-black border-2 border-gray-600 rounded-lg text-white focus:outline-none focus:border-pink-600"
                              placeholder="Mínimo 6 caracteres"
                            />
                          </div>
                          
                          <div className="md:col-span-2 flex space-x-4">
                            <button
                              onClick={handleCreateUser}
                              className="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors"
                            >
                              Crear Usuario
                            </button>
                            <button
                              onClick={() => setShowCreateForm(false)}
                              className="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors"
                            >
                              Cancelar
                            </button>
                          </div>
                        </div>
                      </div>
                    )}

                    {/* Lista de Usuarios */}
                    <div className="bg-gray-900 border-2 border-pink-600 rounded-lg overflow-hidden">
                      <div className="bg-pink-600 p-4">
                        <h3 className="text-xl font-bold">Usuarios del Sistema</h3>
                      </div>
                      
                      <div className="p-6">
                        <div className="space-y-4">
                          {users.map(user => (
                            <div key={user.id} className="bg-black border border-gray-700 rounded-lg p-4">
                              {editingUser && editingUser.id === user.id ? (
                                // Modo edición
                                <div className="space-y-4">
                                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                      <label className="block text-sm font-medium mb-2">Nombre</label>
                                      <input
                                        type="text"
                                        value={editingUser.name}
                                        onChange={(e) => setEditingUser({...editingUser, name: e.target.value})}
                                        className="w-full p-2 bg-gray-700 border border-gray-600 rounded text-white"
                                      />
                                    </div>
                                    <div>
                                      <label className="block text-sm font-medium mb-2">Teléfono</label>
                                      <input
                                        type="tel"
                                        value={editingUser.phone}
                                        onChange={(e) => setEditingUser({...editingUser, phone: e.target.value})}
                                        className="w-full p-2 bg-gray-700 border border-gray-600 rounded text-white"
                                      />
                                    </div>
                                    <div>
                                      <label className="block text-sm font-medium mb-2">Usuario</label>
                                      <input
                                        type="text"
                                        value={editingUser.username}
                                        onChange={(e) => setEditingUser({...editingUser, username: e.target.value})}
                                        className="w-full p-2 bg-gray-700 border border-gray-600 rounded text-white"
                                      />
                                    </div>
                                    <div>
                                      <label className="block text-sm font-medium mb-2">Nueva Contraseña (opcional)</label>
                                      <input
                                        type="password"
                                        value={editingUser.newPassword || ''}
                                        onChange={(e) => setEditingUser({...editingUser, newPassword: e.target.value})}
                                        className="w-full p-2 bg-gray-700 border border-gray-600 rounded text-white"
                                        placeholder="Dejar vacío para mantener actual"
                                      />
                                    </div>
                                  </div>
                                  <div className="flex space-x-2">
                                    <button
                                      onClick={saveEditUser}
                                      className="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2"
                                    >
                                      <Icons.Save />
                                      <span>Guardar</span>
                                    </button>
                                    <button
                                      onClick={cancelEdit}
                                      className="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2"
                                    >
                                      <Icons.Cancel />
                                      <span>Cancelar</span>
                                    </button>
                                  </div>
                                </div>
                              ) : (
                                // Modo visualización
                                <div className="flex justify-between items-center">
                                  <div className="flex items-center space-x-4">
                                    <div className={`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${
                                      user.role === 'admin' ? 'bg-red-600' : user.active ? 'bg-blue-600' : 'bg-gray-600'
                                    }`}>
                                      {user.name.charAt(0).toUpperCase()}
                                    </div>
                                    <div>
                                      <h4 className="font-medium">{user.name}</h4>
                                      <p className="text-gray-400 text-sm">Usuario: {user.username}</p>
                                      <p className="text-gray-400 text-sm">Contraseña: {user.password}</p>
                                      <p className="text-gray-400 text-sm">Teléfono: {user.phone}</p>
                                      <div className="flex items-center space-x-2">
                                        <span className={`inline-block px-2 py-1 rounded text-xs ${
                                          user.role === 'admin' ? 'bg-red-600' : 'bg-blue-600'
                                        } text-white`}>
                                          {user.role === 'admin' ? 'Administrador' : 'Colaborador'}
                                        </span>
                                        <span className={`inline-block px-2 py-1 rounded text-xs ${
                                          user.active ? 'bg-green-600' : 'bg-red-600'
                                        } text-white`}>
                                          {user.active ? 'Activo' : 'Inactivo'}
                                        </span>
                                        {user.createdAt && (
                                          <span className="inline-block px-2 py-1 rounded text-xs bg-gray-600 text-white">
                                            {new Date(user.createdAt).toLocaleDateString()}
                                          </span>
                                        )}
                                      </div>
                                    </div>
                                  </div>
                                  
                                  <div className="flex space-x-2 flex-wrap">
                                    <button
                                      onClick={() => copyCredentials(user)}
                                      className="bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center space-x-1"
                                    >
                                      <Icons.Copy />
                                      <span>Copiar</span>
                                    </button>
                                    
                                    <button
                                      onClick={() => startEditUser(user)}
                                      className="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center space-x-1"
                                    >
                                      <Icons.Edit />
                                      <span>Editar</span>
                                    </button>
                                    
                                    {user.role !== 'admin' && (
                                      <>
                                        <button
                                          onClick={() => toggleUserStatus(user.id)}
                                          className={`${user.active ? 'bg-orange-600 hover:bg-orange-700' : 'bg-green-600 hover:bg-green-700'} text-white px-3 py-2 rounded-lg transition-colors`}
                                        >
                                          {user.active ? 'Desactivar' : 'Activar'}
                                        </button>
                                        
                                        <button
                                          onClick={() => handleDeleteUser(user.id)}
                                          className="bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg transition-colors"
                                        >
                                          Eliminar
                                        </button>
                                      </>
                                    )}
                                  </div>
                                </div>
                              )}
                            </div>
                          ))}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // Panel de Usuario Regular - AQUÍ SE AÑADIERON LAS NUEVAS FUNCIONALIDADES
          return (
            <div className="system-overlay">
              <div className="min-h-screen text-white">
                {/* Header */}
                <header className="bg-gray-900 border-b-2 border-pink-600 p-4">
                  <div className="max-w-4xl mx-auto flex justify-between items-center">
                    <div className="flex items-center space-x-4">
                      <div className="w-12 h-12 bg-gradient-to-r from-pink-600 to-purple-600 rounded-lg flex items-center justify-center">
                        <span className="text-white font-bold text-sm">K</span>
                      </div>
                      <div>
                        <h1 className="text-xl font-bold">Sistema Kokito</h1>
                        <p className="text-gray-400 text-sm">Bienvenido, {currentUser.name}</p>
                      </div>
                    </div>
                    
                    <button
                      onClick={handleLogout}
                      className="flex items-center space-x-2 bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors"
                    >
                      <Icons.LogOut />
                      <span>Cerrar Sesión</span>
                    </button>
                  </div>
                </header>

                {/* Navegación para usuarios */}
                {currentView !== 'dashboard' && (
                  <div className="bg-gray-800 border-b border-gray-700 p-4">
                    <div className="max-w-4xl mx-auto">
                      <button
                        onClick={() => setCurrentView('dashboard')}
                        className="flex items-center space-x-2 text-white hover:text-pink-300 transition-colors"
                      >
                        <Icons.ArrowLeft />
                        <span>Volver al Dashboard</span>
                      </button>
                    </div>
                  </div>
                )}

                <div className="max-w-4xl mx-auto p-6">
                  {/* Vista Dashboard */}
                  {currentView === 'dashboard' && (
                    <>
                      {/* Información del Usuario */}
                      <div className="bg-gray-900 border-2 border-pink-600 rounded-lg p-6 mb-8">
                        <h2 className="text-xl font-bold mb-4">Mi Información</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div>
                            <p className="text-gray-400 text-sm">Nombre</p>
                            <p className="text-lg font-medium">{currentUser.name}</p>
                          </div>
                          <div>
                            <p className="text-gray-400 text-sm">Teléfono</p>
                            <p className="text-lg font-medium">{currentUser.phone}</p>
                          </div>
                          <div>
                            <p className="text-gray-400 text-sm">Usuario</p>
                            <p className="text-lg font-medium">{currentUser.username}</p>
                          </div>
                          <div>
                            <p className="text-gray-400 text-sm">Estado</p>
                            <span className="inline-block px-3 py-1 rounded-full text-sm bg-green-600 text-white">
                              Activo
                            </span>
                          </div>
                        </div>
                      </div>

                      {/* Botones de Acción */}
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        {/* Calculadora de Comisiones */}
                        <div 
                          onClick={() => setCurrentView('calculator')}
                          className="bg-gray-900 border-2 border-purple-600 rounded-lg p-8 text-center hover:bg-gray-800 transition-colors cursor-pointer"
                        >
                          <div className="text-purple-600 text-6xl mb-4 flex justify-center">
                            <Icons.Calculator />
                          </div>
                          <h3 className="text-xl font-bold mb-2">Calculadora de Comisiones</h3>
                          <p className="text-gray-400 mb-4">Calcula tus ganancias diarias por tatuajes y kits</p>
                          <div className="bg-purple-600/20 text-purple-400 px-4 py-2 rounded-lg text-sm">
                            Calcular comisiones
                          </div>
                        </div>

                        {/* Tips de Venta */}
                        <div 
                          onClick={() => setCurrentView('tips')}
                          className="bg-gray-900 border-2 border-yellow-600 rounded-lg p-8 text-center hover:bg-gray-800 transition-colors cursor-pointer"
                        >
                          <div className="text-yellow-600 text-6xl mb-4 flex justify-center">
                            <Icons.Lightbulb />
                          </div>
                          <h3 className="text-xl font-bold mb-2">Tips de Venta</h3>
                          <p className="text-gray-400 mb-4">Consejos y mejores prácticas para maximizar ventas</p>
                          <div className="bg-yellow-600/20 text-yellow-400 px-4 py-2 rounded-lg text-sm">
                            Ver consejos
                          </div>
                        </div>

                        {/* Solicitud de Inventario */}
                        <div 
                          onClick={() => window.location.href = 'pedidos.html'}
                          className="bg-gray-900 border-2 border-blue-600 rounded-lg p-8 text-center hover:bg-gray-800 transition-colors cursor-pointer"
                        >
                          <div className="text-blue-600 text-6xl mb-4 flex justify-center">
                            <Icons.Package />
                          </div>
                          <h3 className="text-xl font-bold mb-2">Solicitud de Inventario</h3>
                          <p className="text-gray-400 mb-4">Realiza solicitudes de productos e inventario</p>
                          <div className="bg-blue-600/20 text-blue-400 px-4 py-2 rounded-lg text-sm">
                            Hacer solicitud
                          </div>
                        </div>

                        {/* Ventas del Día */}
                        <div className="bg-gray-900 border-2 border-green-600 rounded-lg p-8 text-center hover:bg-gray-800 transition-colors cursor-pointer">
                          <div className="text-green-600 text-6xl mb-4 flex justify-center">
                            <Icons.TrendingUp />
                          </div>
                          <h3 className="text-xl font-bold mb-2">Ventas del Día</h3>
                          <p className="text-gray-400 mb-4">Registra y consulta las ventas diarias</p>
                          <div className="bg-green-600/20 text-green-400 px-4 py-2 rounded-lg text-sm">
                            Próximamente disponible
                          </div>
                        </div>
                      </div>

                      {/* Información Adicional */}
                      <div className="bg-gradient-to-r from-pink-600/20 to-purple-600/20 border border-pink-600 rounded-lg p-6">
                        <h4 className="font-bold mb-2">📋 Información Importante</h4>
                        <ul className="text-sm text-gray-300 space-y-1">
                          <li>• Usa la calculadora para conocer tus comisiones diarias</li>
                          <li>• Revisa los tips de venta para mejorar tus resultados</li>
                          <li>• Tus datos están pre-configurados para solicitudes rápidas</li>
                          <li>• Contacta al administrador para soporte técnico</li>
                        </ul>
                      </div>
                    </>
                  )}

                  {/* Vista Calculadora */}
                  {currentView === 'calculator' && (
                    <div style={{background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', minHeight: 'calc(100vh - 200px)', borderRadius: '1rem', padding: '2rem'}}>
                      <CalculatorView />
                    </div>
                  )}

                  {/* Vista Tips */}
                  {currentView === 'tips' && (
                    <div style={{background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', minHeight: 'calc(100vh - 200px)', borderRadius: '1rem', padding: '2rem'}}>
                      <TipsView />
                    </div>
                  )}
                </div>
              </div>
            </div>
          );
        };

        // Renderizar la aplicación
        ReactDOM.render(React.createElement(KokitoSystem), document.getElementById('root'));
    </script>
</body>
</html>
