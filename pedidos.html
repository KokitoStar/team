}

            .motivo-image {
                width: 70px;
                height: 70px;
            }

            .motivo-content {
                flex-direction: column;
                gap: 12px;
                width: 100%;
                margin-top: 0;
            }

            .quantity-controls {
                justify-content: center;
                min-width: auto;
                gap: 8px;
            }

            .motivo-name {
                font-size: 1em;
                max-width: 100%;
                overflow-wrap: break-word;
                white-space: normal;
                text-align: center;
                margin-right: 0;
            }

            .btn-quantity {
                width: 35px;
                height: 35px;
                font-size: 18px;
            }

            .quantity-input {
                width: 50px;
                height: 35px;
                font-size: 1em;
            }
        }

        @media (max-width: 768px) {
            .producto-item {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .producto-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .quantity-controls {
                justify-content: center;
            }
            
            .temporada-item {
                flex-direction: column;
                gap: 15px;
                text-align: center;
                padding: 20px 15px;
            }
            
            .temporada-inputs {
                flex-direction: column;
                gap: 15px;
                width: 100%;
            }
            
            .temporada-name-input {
                min-width: auto;
                width: 100%;
                text-align: center;
            }
            
            .temporada-quantity {
                justify-content: center;
                gap: 10px;
            }
            
            .temporada-quantity-input {
                text-align: center;
            }
            
            .toggle-container {
                justify-content: center;
                flex-direction: row;
                gap: 10px;
            }
            
            .otros-materiales-textarea {
                font-size: 1em;
                min-height: 80px;
            }
            
            .otros-materiales-input-container {
                padding: 15px;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <script>
        // Peque√±o delay para asegurar que localStorage est√© disponible
        function checkAndValidateAccess() {
            // Esperar un poco para que todo est√© listo
            setTimeout(() => {
                validateAccess();
            }, 200);
        }
        
        // Validar acceso al cargar la p√°gina
        function validateAccess() {
            console.log('Iniciando validaci√≥n de acceso...');
            console.log('localStorage disponible:', typeof(Storage) !== "undefined");
            
            try {
                // Listar todas las claves de localStorage para depuraci√≥n
                console.log('Claves en localStorage:', Object.keys(localStorage));
                
                const sessionData = localStorage.getItem('kokito_session');
                console.log('Datos de sesi√≥n encontrados:', sessionData);
                
                if (!sessionData || sessionData === 'null' || sessionData === 'undefined') {
                    console.log('No hay sesi√≥n v√°lida, redirigiendo...');
                    alert('Debes iniciar sesi√≥n para acceder a esta p√°gina');
                    window.location.href = 'index.html';
                    return false;
                }
                
                const session = JSON.parse(sessionData);
                const now = Date.now();
                
                console.log('Sesi√≥n parseada:', session);
                console.log('Tiempo actual:', now);
                console.log('Tiempo de expiraci√≥n:', session.expires);
                
                // Verificar si la sesi√≥n ha expirado (30 minutos)
                if (now > session.expires) {
                    console.log('Sesi√≥n expirada, limpiando...');
                    localStorage.removeItem('kokito_session');
                    alert('Tu sesi√≥n ha expirado. Por favor inicia sesi√≥n nuevamente.');
                    window.location.href = 'index.html';
                    return false;
                }
                
                // Verificar que los usuarios del sistema existen
                const users = localStorage.getItem('kokito_users');
                console.log('Usuarios en sistema:', users ? 'S√≠' : 'No');
                
                if (!users) {
                    console.log('No hay usuarios en el sistema');
                    alert('Error del sistema. Redirigiendo al login.');
                    window.location.href = 'index.html';
                    return false;
                }
                
                const usersList = JSON.parse(users);
                const userExists = usersList.find(u => u.id === session.userId && u.active);
                
                console.log('Usuario encontrado:', userExists ? 'S√≠' : 'No');
                
                if (!userExists) {
                    console.log('Usuario no encontrado o desactivado');
                    localStorage.removeItem('kokito_session');
                    alert('Usuario no v√°lido o desactivado.');
                    window.location.href = 'index.html';
                    return false;
                }
                
                console.log('Validaci√≥n exitosa, inicializando aplicaci√≥n...');
                
                // Si llegamos aqu√≠, todo est√° bien
                initializeApp();
                return true;
                
            } catch (error) {
                console.error('Error validando acceso:', error);
                alert('Error del sistema: ' + error.message);
                window.location.href = 'index.html';
                return false;
            }
        }
        
        // Funci√≥n para obtener datos del usuario logueado
        function getCurrentUserData() {
            const sessionData = localStorage.getItem('kokito_session');
            return sessionData ? JSON.parse(sessionData) : null;
        }
        
        // Funci√≥n para volver al sistema principal
        function goBackToSystem() {
            window.location.href = 'index.html';
        }
        
        // Funci√≥n para llenar autom√°ticamente los datos del usuario
        function fillUserData() {
            const userData = getCurrentUserData();
            console.log('Llenando datos del usuario:', userData);
            
            if (userData) {
                const nombreInput = document.getElementById('nombreCompleto');
                const telefonoInput = document.getElementById('telefono');
                
                if (nombreInput) {
                    nombreInput.value = userData.name || '';
                    nombreInput.style.backgroundColor = '#333';
                }
                
                if (telefonoInput) {
                    telefonoInput.value = userData.phone || '';
                    telefonoInput.style.backgroundColor = '#333';
                }
                
                console.log('Datos llenados correctamente');
            } else {
                console.log('No hay datos de usuario para llenar');
            }
        }
        
        // Ejecutar cuando la p√°gina se carga
        console.log('P√°gina cargada, iniciando validaci√≥n...');
        checkAndValidateAccess();
    </script>

    <div class="progress-bar">
        <div class="progress-container">
            <div class="progress-step">
                <div class="step-circle active" id="step1">1</div>
                <div class="step-label">Motivos</div>
                <div class="step-line" id="line1"></div>
            </div>
            <div class="progress-step">
                <div class="step-circle" id="step2">2</div>
                <div class="step-label">Colores</div>
                <div class="step-line" id="line2"></div>
            </div>
            <div class="progress-step">
                <div class="step-circle" id="step3">3</div>
                <div class="step-label">Datos</div>
                <div class="step-line" id="line3"></div>
            </div>
            <div class="progress-step">
                <div class="step-circle" id="step4">4</div>
                <div class="step-label">Listo</div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="logo-section">
            <div class="logo-container">
                <img id="logoImage" src="motivos/LOGO_KOKITO.png" alt="Kokito Star Logo" class="logo-image">
            </div>
        </div>

        <div class="header">
            <h1>üì¶ SOLICITUD DE MATERIAL</h1>
            <p>Sistema para colaboradoras de Kokito Star</p>
        </div>

        <div class="content">
            <div class="info-section">
                <h3>üë• INFORMACI√ìN IMPORTANTE</h3>
                <div class="info-item">
                    üé® Cada solicitud es individual y flexible
                </div>
                <div class="info-item">
                    üìã Puedes pedir solo lo que necesites: motivos, colores, o productos
                </div>
                <div class="info-item">
                    üì¶ Los pedidos se procesan seg√∫n disponibilidad en inventario
                </div>
            </div>

            <div class="instructions">
                <h3>üìã ¬øC√≥mo hacer tu solicitud?</h3>

                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-text">
                        <strong>Selecciona motivos:</strong> Elige los dise√±os que necesitas y la cantidad de paquetes (cada paquete = 30 stencils).
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-text">
                        <strong>Escoge colores:</strong> Selecciona los colores de glitter que prefieras o elige "Todos los colores".
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-text">
                        <strong>Completa datos:</strong> Llena el formulario con tu informaci√≥n personal y punto de venta.
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-text">
                        <strong>Env√≠a solicitud:</strong> Revisa tu pedido y env√≠a la solicitud por WhatsApp.
                    </div>
                </div>
            </div>

            <div class="counters">
                <div class="counter">
                    <span class="counter-number" id="totalPaquetes">0</span>
                    <span class="counter-label">Paquetes solicitados</span>
                </div>
                <div class="counter">
                    <span class="counter-number" id="totalStencils">0</span>
                    <span class="counter-label">Total stencils</span>
                </div>
                <div class="counter">
                    <span class="counter-number" id="totalItems">0</span>
                    <span class="counter-label">Items adicionales</span>
                </div>
            </div>

            <div id="alerts"></div>

            <div class="section">
                <h2 class="section-title">üé® Selecciona tus Motivos <span style="font-family: Arial, sans-serif; font-weight: normal;">(1 paquete = 30 stencils)</span></h2>
                <div class="motivos-grid" id="motivosGrid"></div>
            </div>

            <div class="section">
                <h2 class="section-title">‚ú® Motivos de Temporada <span style="font-family: Arial, sans-serif; font-weight: normal;">(Ej: Kuromi, My Melody, Stitch, Labubu, etc.)</span></h2>
                <div class="temporada-section">
                    <div class="temporada-info">
                        <p style="color: #ccc; margin-bottom: 15px; text-align: center;">
                            üí° Si necesitas motivos especiales de temporada, agr√©galos aqu√≠ con el nombre exacto
                        </p>
                    </div>
                    <div id="motivosTemporadaContainer"></div>
                    <button type="button" class="btn-add-temporada" onclick="agregarMotivoTemporada()">
                        ‚ûï Agregar Motivo de Temporada
                    </button>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">üß™ Productos Adicionales</h2>
                <div class="productos-adicionales">
                    <div class="producto-item">
                        <div class="producto-info">
                            <div class="producto-icon">üß™</div>
                            <div class="producto-details">
                                <div class="producto-name">Pega M√°gica</div>
                                <div class="producto-description">Para aplicar los tatuajes</div>
                            </div>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-pega-magica" onchange="toggleProductoAdicional('pegaMagica')">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="label-pega-magica">NO</span>
                        </div>
                    </div>
                    
                    <div class="producto-item">
                        <div class="producto-info">
                            <div class="producto-icon">üìã</div>
                            <div class="producto-details">
                                <div class="producto-name">Transfer</div>
                                <div class="producto-description">Para transferir dise√±os</div>
                            </div>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-transfer" onchange="toggleProductoAdicional('transfer')">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="label-transfer">NO</span>
                        </div>
                    </div>

                    <div class="producto-item">
                        <div class="producto-info">
                            <div class="producto-icon">üì¢</div>
                            <div class="producto-details">
                                <div class="producto-name">Publicidad</div>
                                <div class="producto-description">Material promocional</div>
                            </div>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-publicidad" onchange="toggleProductoAdicional('publicidad')">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="label-publicidad">NO</span>
                        </div>
                    </div>

                    <div class="producto-item" id="otros-materiales-container">
                        <div class="producto-info">
                            <div class="producto-icon">üì¶</div>
                            <div class="producto-details">
                                <div class="producto-name">Otros Materiales</div>
                                <div class="producto-description">Especifica qu√© otros materiales necesitas</div>
                            </div>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-otros-materiales" onchange="toggleOtrosMateriales()">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="label-otros-materiales">NO</span>
                        </div>
                    </div>

                    <div class="otros-materiales-input-container" id="otros-materiales-input" style="display: none;">
                        <textarea class="otros-materiales-textarea" 
                                  id="textarea-otros-materiales"
                                  placeholder="Describe qu√© otros materiales necesitas...&#10;Ej: Bolsas, Etiquetas, Folletos, etc."
                                  onchange="updateOtrosMaterialesTexto()"
                                  onkeyup="updateOtrosMaterialesTexto()"></textarea>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">üåà Selecciona Colores de Glitter</h2>
                <div class="colores-grid" id="coloresGrid"></div>
            </div>

            <div class="section">
                <h2 class="section-title">üë§ Informaci√≥n Personal</h2>
                <div class="shipping-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label"><span style="font-family: 'Arial Black', Arial, sans-serif; font-weight: 900;">üìÖ Fecha</span></label>
                            <input type="date" class="form-input" id="fecha" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label"><span style="font-family: 'Arial Black', Arial, sans-serif; font-weight: 900;">üè™ Punto de venta</span></label>
                            <input type="text" class="form-input" id="puntoVenta" placeholder="Ej: Centro Comercial Santaf√©" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label"><span style="font-family: 'Arial Black', Arial, sans-serif; font-weight: 900;">üë§ Nombre completo</span></label>
                            <input type="text" class="form-input" id="nombreCompleto" placeholder="Tu nombre completo" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label"><span style="font-family: 'Arial Black', Arial, sans-serif; font-weight: 900;">‚òéÔ∏è Tel√©fono</span></label>
                            <input type="tel" class="form-input" id="telefono" placeholder="Ej: 3001234567" required>
                        </div>
                    </div>
                </div>
            </div>

            <div class="summary-section" id="summarySection" style="display: none;">
                <h3 style="color: #E50695; text-align: center; margin-bottom: 20px;">üìã RESUMEN DE TU SOLICITUD</h3>
                <div class="summary-item">
                    <span class="summary-label">Total de paquetes:</span>
                    <span class="summary-value" id="summaryPaquetes">0</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Total de stencils:</span>
                    <span class="summary-value" id="summaryStencils">0</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Colores solicitados:</span>
                    <span class="summary-value" id="summaryColores">0</span>
                </div>
                <div class="summary-item" id="summaryProductosContainer" style="display: none;">
                    <span class="summary-label">Productos adicionales:</span>
                    <span class="summary-value" id="summaryProductos">0</span>
                </div>
            </div>

            <div class="button-status" id="buttonStatus">
                üí° Llena al menos un campo y los datos personales para activar el bot√≥n
            </div>

            <button class="whatsapp-btn" id="whatsappBtn" onclick="enviarWhatsApp()" disabled>
                üì± Enviar Solicitud por WhatsApp
            </button>
            
            <button class="back-btn" onclick="goBackToSystem()">
                üîô Volver al Sistema
            </button>
        </div>
    </div>

    <script>
        const motivos = [
            '√Åguila', 'Ara√±a', 'Arco√≠ris', 'Barbie', 'Batman', 'Beso', 
            'Caballo', 'Carita feliz', 'Coraz√≥n Karol G', 'Delf√≠n', 
            'Dinosaurio', 'Drag√≥n', 'Elefante', 'Flash', 'Gato', 
            'Hongo', 'Huella', 'Le√≥n', 'Mario', 'Mariposa', 
            'Medell√≠n', 'Nacional', 'Notas musicales', 'Pirata', 
            'Planeta', 'Pluma', 'Pony', 'Sirenita', 'Sonic', 'Unicornio'
        ];

        const colores = [
            {name: 'Azul oscuro', emoji: 'üíô'},
            {name: 'Azul claro', emoji: 'ü©µ'},
            {name: 'Azul brillante', emoji: 'üíô'},
            {name: 'Dorado', emoji: 'üíõ'},
            {name: 'Rojo', emoji: '‚ù§Ô∏è'},
            {name: 'Verde', emoji: 'üíö'},
            {name: 'Fucsia', emoji: 'ü©∑'},
            {name: 'Morado', emoji: 'üíú'},
            {name: 'Rosado', emoji: 'üíó'},
            {name: 'Caf√©', emoji: 'ü§é'},
            {name: 'Negro', emoji: 'üñ§'},
            {name: 'Plateado', emoji: 'ü§ç'},
            {name: 'Cobre', emoji: 'üß°'},
            {name: 'Multicolor', emoji: 'üåà'}
        ];

        // Mapeo de im√°genes de los motivos
        const motivoImages = {
            '√Åguila': 'motivos/K_Aguila.png',
            'Ara√±a': 'motivos/K_Arana.png',
            'Arco√≠ris': 'motivos/K_Arcoiris.png',
            'Barbie': 'motivos/K_Barbie.png',
            'Batman': 'motivos/K_Batman.png',
            'Beso': 'motivos/K_Beso.png',
            'Caballo': 'motivos/K_Caballo.png',
            'Carita feliz': 'motivos/K_Carita_feliz.png',
            'Coraz√≥n Karol G': 'motivos/K_Crazon_CG.png',
            'Delf√≠n': 'motivos/K_Delfin.png',
            'Dinosaurio': 'motivos/K_Dinosaurio.png',
            'Drag√≥n': 'motivos/K_Dragon.png',
            'Elefante': 'motivos/K_Elefante.png',
            'Flash': 'motivos/K_Flash.png',
            'Gato': 'motivos/K_Gato.png',
            'Hongo': 'motivos/K_Hongo.png',
            'Huella': 'motivos/K_Huella.png',
            'Le√≥n': 'motivos/K_Leon.png',
            'Mario': 'motivos/K_Mario.png',
            'Mariposa': 'motivos/K_Mariposa.png',
            'Medell√≠n': 'motivos/K_Medellin.png',
            'Nacional': 'motivos/K_Nacional.png',
            'Notas musicales': 'motivos/K_Notas.png',
            'Pirata': 'motivos/K_Calavera.png',
            'Planeta': 'motivos/K_Paneta.png',
            'Pluma': 'motivos/K_Pluma.png',
            'Pony': 'motivos/K_Pony.png',
            'Sirenita': 'motivos/K_Sirena.png',
            'Sonic': 'motivos/K_Sonic.png',
            'Unicornio': 'motivos/K_Unicornio.png'
        };

        let selectedMotivos = {};
        let selectedColores = [];
        let motivosTemporada = [];
        let productosAdicionales = {
            pegaMagica: false,
            transfer: false,
            publicidad: false,
            otrosMateriales: false
        };
        let otrosMaterialesTexto = '';
        let currentStep = 1;

        function handleImageError(img) {
            img.style.display = 'none';
            const placeholder = document.createElement('div');
            placeholder.style.cssText = `
                width: 80px; 
                height: 80px; 
                display: flex; 
                align-items: center; 
                justify-content: center; 
                font-size: 48px; 
                background: rgba(255,255,255,0.1); 
                border-radius: 8px;
                color: white;
            `;
            placeholder.textContent = getEmojiForMotivo(img.alt);
            img.parentNode.appendChild(placeholder);
        }

        function getEmojiForMotivo(motivo) {
            const emojis = {
                '√Åguila': 'ü¶Ö', 'Ara√±a': 'üï∑Ô∏è', 'Arco√≠ris': 'üåà', 'Barbie': 'üíÑ', 'Batman': 'ü¶á',
                'Beso': 'üíã', 'Caballo': 'üêé', 'Carita feliz': 'üòä', 'Coraz√≥n Karol G': 'üíñ',
                'Delf√≠n': 'üê¨', 'Dinosaurio': 'ü¶ï', 'Drag√≥n': 'üê≤', 'Elefante': 'üêò',
                'Flash': '‚ö°', 'Gato': 'üê±', 'Hongo': 'üçÑ', 'Huella': 'üêæ', 'Le√≥n': 'ü¶Å',
                'Mario': 'üéÆ', 'Mariposa': 'ü¶ã', 'Medell√≠n': 'üèôÔ∏è', 'Nacional': '‚öΩ',
                'Notas musicales': 'üéµ', 'Pirata': '‚ò†Ô∏è', 'Planeta': 'ü™ê', 'Pluma': 'ü™∂',
                'Pony': 'ü¶Ñ', 'Sirenita': 'üßú‚Äç‚ôÄÔ∏è', 'Sonic': 'üí®', 'Unicornio': 'ü¶Ñ'
            };
            return emojis[motivo] || 'üé®';
        }

        function updateProgressBar(step) {
            currentStep = step;
            
            for (let i = 1; i <= 4; i++) {
                const circle = document.getElementById(`step${i}`);
                const line = document.getElementById(`line${i}`);
                
                if (i < step) {
                    circle.className = 'step-circle completed';
                    if (line) line.className = 'step-line active';
                } else if (i === step) {
                    circle.className = 'step-circle active';
                } else {
                    circle.className = 'step-circle';
                    if (line) line.className = 'step-line';
                }
            }
        }

        function animateCounter(elementId, newValue) {
            const element = document.getElementById(elementId);
            if (element) {
                element.classList.add('animate');
                element.textContent = newValue;
                
                setTimeout(() => {
                    element.classList.remove('animate');
                }, 500);
            }
        }

        function initializeApp() {
            createMotivosGrid();
            createColoresGrid();
            updateCounters();
            updateWhatsAppButton();
            setCurrentDate();
            fillUserData(); // Llenar autom√°ticamente los datos del usuario logueado
            
            // Event listeners para validar formulario en tiempo real
            const formInputs = ['fecha', 'puntoVenta', 'nombreCompleto', 'telefono'];
            formInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', function() {
                        updateWhatsAppButton();
                        updateSummary();
                    });
                }
            });
            
            console.log('Aplicaci√≥n inicializada correctamente');
        }

        function setCurrentDate() {
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            const fechaInput = document.getElementById('fecha');
            if (fechaInput) {
                fechaInput.value = formattedDate;
            }
        }

        function createMotivosGrid() {
            const grid = document.getElementById('motivosGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            motivos.forEach(motivo => {
                const item = document.createElement('div');
                item.className = 'motivo-item';
                
                const imageUrl = motivoImages[motivo];
                
                item.innerHTML = `
                    <div class="motivo-image-container" onclick="increaseQuantity('${motivo}')">
                        <img src="${imageUrl}" alt="${motivo}" class="motivo-image" 
                             onerror="handleImageError(this)">
                    </div>
                    <div class="motivo-content">
                        <div class="motivo-name">${motivo}</div>
                        <div class="quantity-controls">
                            <button class="btn-quantity" onclick="decreaseQuantity('${motivo}')">‚àí</button>
                            <input type="number" class="quantity-input" id="qty-input-${motivo}" 
                                   value="0" min="0" max="999" 
                                   onchange="updateQuantityFromInput('${motivo}')"
                                   onkeypress="handleEnterKey(event, '${motivo}')">
                            <button class="btn-quantity" onclick="increaseQuantity('${motivo}')">+</button>
                        </div>
                    </div>
                `;
                grid.appendChild(item);
                selectedMotivos[motivo] = 0;
            });
        }

        function createColoresGrid() {
            const grid = document.getElementById('coloresGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            colores.forEach((color, index) => {
                const item = document.createElement('div');
                item.className = 'color-item';
                item.id = `color-${index}`;
                item.innerHTML = `
                    <div class="color-emoji">${color.emoji}</div>
                    <div>${color.name}</div>
                `;
                item.onclick = () => toggleColor(index);
                grid.appendChild(item);
            });
        }

        function increaseQuantity(motivo) {
            selectedMotivos[motivo]++;
            const input = document.getElementById(`qty-input-${motivo}`);
            if (input) {
                input.value = selectedMotivos[motivo];
            }
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function getTotalPaquetes() {
            const paquetesRegulares = Object.values(selectedMotivos).reduce((sum, qty) => sum + qty, 0);
            const paquetesTemporada = getTotalPaquetesTemporada();
            return paquetesRegulares + paquetesTemporada;
        }

        function getTotalStencils() {
            return getTotalPaquetes() * 30;
        }

        function getTotalColores() {
            return selectedColores.length;
        }

        function agregarMotivoTemporada() {
            const id = Date.now(); // ID √∫nico basado en timestamp
            const motivoData = { id: id, nombre: '', cantidad: 1 };
            motivosTemporada.push(motivoData);
            
            renderMotivosTemporada();
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function eliminarMotivoTemporada(id) {
            motivosTemporada = motivosTemporada.filter(motivo => motivo.id !== id);
            renderMotivosTemporada();
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function actualizarMotivoTemporada(id, campo, valor) {
            const motivo = motivosTemporada.find(m => m.id === id);
            if (motivo) {
                if (campo === 'cantidad') {
                    valor = Math.max(1, parseInt(valor) || 1);
                }
                motivo[campo] = valor;
                updateCounters();
                updateSummary();
                updateWhatsAppButton();
            }
        }

        function renderMotivosTemporada() {
            const container = document.getElementById('motivosTemporadaContainer');
            if (!container) return;
            
            container.innerHTML = '';
            
            motivosTemporada.forEach(motivo => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'temporada-item';
                itemDiv.innerHTML = `
                    <div class="temporada-inputs">
                        <input type="text" 
                               class="temporada-name-input" 
                               placeholder="Ej: Kuromi, My Melody, Stitch..." 
                               value="${motivo.nombre}"
                               onchange="actualizarMotivoTemporada(${motivo.id}, 'nombre', this.value)"
                               onkeyup="actualizarMotivoTemporada(${motivo.id}, 'nombre', this.value)">
                        <div class="temporada-quantity">
                            <span style="color: #E50695; font-weight: bold;">Paquetes:</span>
                            <input type="number" 
                                   class="temporada-quantity-input" 
                                   min="1" max="999" 
                                   value="${motivo.cantidad}"
                                   onchange="actualizarMotivoTemporada(${motivo.id}, 'cantidad', this.value)">
                        </div>
                    </div>
                    <button type="button" class="btn-remove-temporada" onclick="eliminarMotivoTemporada(${motivo.id})">
                        ‚úï
                    </button>
                `;
                container.appendChild(itemDiv);
            });
        }

        function getTotalPaquetesTemporada() {
            return motivosTemporada.reduce((sum, motivo) => {
                return sum + (motivo.cantidad || 0);
            }, 0);
        }

        function getTotalStencilsTemporada() {
            return getTotalPaquetesTemporada() * 30;
        }

        function toggleProductoAdicional(producto) {
            productosAdicionales[producto] = !productosAdicionales[producto];
            
            // Actualizar el toggle visualmente
            const toggle = document.getElementById(`toggle-${producto.replace('M', '-m')}`);
            const label = document.getElementById(`label-${producto.replace('M', '-m')}`);
            
            if (toggle && label) {
                toggle.checked = productosAdicionales[producto];
                label.textContent = productosAdicionales[producto] ? 'S√ç' : 'NO';
                label.classList.toggle('active', productosAdicionales[producto]);
            }
            
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function toggleOtrosMateriales() {
            productosAdicionales.otrosMateriales = !productosAdicionales.otrosMateriales;
            
            // Actualizar el toggle visualmente
            const toggle = document.getElementById('toggle-otros-materiales');
            const label = document.getElementById('label-otros-materiales');
            const inputContainer = document.getElementById('otros-materiales-input');
            
            if (toggle && label && inputContainer) {
                toggle.checked = productosAdicionales.otrosMateriales;
                label.textContent = productosAdicionales.otrosMateriales ? 'S√ç' : 'NO';
                label.classList.toggle('active', productosAdicionales.otrosMateriales);
                
                // Mostrar/ocultar el campo de texto
                if (productosAdicionales.otrosMateriales) {
                    inputContainer.style.display = 'block';
                    // Focus en el textarea despu√©s de un peque√±o delay para la animaci√≥n
                    setTimeout(() => {
                        const textarea = document.getElementById('textarea-otros-materiales');
                        if (textarea) textarea.focus();
                    }, 300);
                } else {
                    inputContainer.style.display = 'none';
                    otrosMaterialesTexto = '';
                    const textarea = document.getElementById('textarea-otros-materiales');
                    if (textarea) textarea.value = '';
                }
            }
            
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function updateOtrosMaterialesTexto() {
            const textarea = document.getElementById('textarea-otros-materiales');
            if (textarea) {
                otrosMaterialesTexto = textarea.value.trim();
                updateSummary();
                updateWhatsAppButton();
            }
        }

        function updateCounters() {
            const totalPaquetes = getTotalPaquetes();
            const totalStencils = getTotalStencils();
            const totalColores = getTotalColores();
            const productosSeleccionados = Object.values(productosAdicionales).filter(selected => selected === true).length;
            const totalItems = totalColores + productosSeleccionados;
            
            animateCounter('totalPaquetes', totalPaquetes);
            animateCounter('totalStencils', totalStencils);
            animateCounter('totalItems', totalItems);
        }

        function updateSummary() {
            const totalPaquetes = getTotalPaquetes();
            const hasTemporada = motivosTemporada.some(motivo => motivo.nombre.trim() !== '' && motivo.cantidad > 0);
            const hasColores = selectedColores.length > 0;
            const hasProductosAdicionales = Object.values(productosAdicionales).some(selected => selected === true);
            
            const summarySection = document.getElementById('summarySection');
            if (!summarySection) return;
            
            if (totalPaquetes > 0 || hasTemporada || hasColores || hasProductosAdicionales) {
                const summaryPaquetes = document.getElementById('summaryPaquetes');
                const summaryStencils = document.getElementById('summaryStencils');
                const summaryColores = document.getElementById('summaryColores');
                
                if (summaryPaquetes) summaryPaquetes.textContent = totalPaquetes;
                if (summaryStencils) summaryStencils.textContent = getTotalStencils();
                if (summaryColores) summaryColores.textContent = getTotalColores();
                
                // Mostrar productos adicionales si hay alguno
                if (hasProductosAdicionales) {
                    let productosTexto = [];
                    if (productosAdicionales.pegaMagica) {
                        productosTexto.push('‚úÖ Pega M√°gica');
                    }
                    if (productosAdicionales.transfer) {
                        productosTexto.push('‚úÖ Transfer');
                    }
                    if (productosAdicionales.publicidad) {
                        productosTexto.push('‚úÖ Publicidad');
                    }
                    if (productosAdicionales.otrosMateriales) {
                        const textoOtros = otrosMaterialesTexto ? ` (${otrosMaterialesTexto.substring(0, 30)}${otrosMaterialesTexto.length > 30 ? '...' : ''})` : '';
                        productosTexto.push(`‚úÖ Otros Materiales${textoOtros}`);
                    }
                    const summaryProductos = document.getElementById('summaryProductos');
                    const summaryProductosContainer = document.getElementById('summaryProductosContainer');
                    if (summaryProductos) summaryProductos.textContent = productosTexto.join(', ');
                    if (summaryProductosContainer) summaryProductosContainer.style.display = 'flex';
                } else {
                    const summaryProductosContainer = document.getElementById('summaryProductosContainer');
                    if (summaryProductosContainer) summaryProductosContainer.style.display = 'none';
                }
                
                summarySection.style.display = 'block';
            } else {
                summarySection.style.display = 'none';
            }
        }

        function validateRequiredFields() {
            const fecha = document.getElementById('fecha');
            const puntoVenta = document.getElementById('puntoVenta');
            const nombreCompleto = document.getElementById('nombreCompleto');
            const telefono = document.getElementById('telefono');
            
            return fecha && puntoVenta && nombreCompleto && telefono &&
                   fecha.value.trim() && puntoVenta.value.trim() && 
                   nombreCompleto.value.trim() && telefono.value.trim();
        }

        function hasValidSelections() {
            const hasMotivos = getTotalPaquetes() > 0;
            const hasTemporada = motivosTemporada.some(motivo => motivo.nombre.trim() !== '' && motivo.cantidad > 0);
            const hasColores = selectedColores.length > 0;
            const hasProductosAdicionales = Object.values(productosAdicionales).some(selected => selected === true);
            
            return hasMotivos || hasTemporada || hasColores || hasProductosAdicionales;
        }

        function updateWhatsAppButton() {
            const btn = document.getElementById('whatsappBtn');
            const statusDiv = document.getElementById('buttonStatus');
            
            if (!btn || !statusDiv) return;
            
            const hasRequiredFields = validateRequiredFields();
            const hasValidSelection = hasValidSelections();
            
            // Verificar que si seleccionaron "Otros Materiales" hayan escrito algo
            const otrosMaterialesCompleto = !productosAdicionales.otrosMateriales || 
                                          (productosAdicionales.otrosMateriales && otrosMaterialesTexto.trim() !== '');
            
            const canSend = hasValidSelection && hasRequiredFields && otrosMaterialesCompleto;
            
            // Actualizar estado del bot√≥n
            btn.disabled = !canSend;
            
            // Actualizar mensaje de estado
            if (!hasValidSelection && !hasRequiredFields) {
                statusDiv.textContent = 'üí° Selecciona al menos un producto y completa tus datos personales';
                statusDiv.className = 'button-status incomplete';
            } else if (!hasValidSelection) {
                statusDiv.textContent = '‚ö†Ô∏è Selecciona al menos un motivo, color o producto adicional';
                statusDiv.className = 'button-status incomplete';
            } else if (!hasRequiredFields) {
                statusDiv.textContent = '‚ö†Ô∏è Completa todos los campos de informaci√≥n personal';
                statusDiv.className = 'button-status incomplete';
            } else if (!otrosMaterialesCompleto) {
                statusDiv.textContent = '‚ö†Ô∏è Describe qu√© otros materiales necesitas o desactiva la opci√≥n';
                statusDiv.className = 'button-status incomplete';
            } else {
                statusDiv.textContent = '‚úÖ ¬°Todo listo! Puedes enviar tu solicitud';
                statusDiv.className = 'button-status ready';
            }
        }

        function showAlert(message, type) {
            const alertsContainer = document.getElementById('alerts');
            if (alertsContainer) {
                alertsContainer.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            }
        }

        function clearAlerts() {
            const alertsContainer = document.getElementById('alerts');
            if (alertsContainer) {
                alertsContainer.innerHTML = '';
            }
        }

        function enviarWhatsApp() {
            // Validaciones finales
            if (!hasValidSelections()) {
                showAlert('‚ùå Debes seleccionar al menos un producto', 'danger');
                return;
            }

            if (!validateRequiredFields()) {
                showAlert('‚ùå Por favor completa todos los campos obligatorios', 'danger');
                return;
            }

            // Validar que los motivos de temporada tengan nombre
            const motivosTemporadaValidos = motivosTemporada.filter(motivo => motivo.nombre.trim() !== '');
            if (motivosTemporada.length > motivosTemporadaValidos.length) {
                showAlert('‚ùå Por favor completa el nombre de todos los motivos de temporada o elimina los vac√≠os', 'danger');
                return;
            }

            // Validar que si seleccionaron "Otros Materiales" hayan escrito algo
            if (productosAdicionales.otrosMateriales && otrosMaterialesTexto.trim() === '') {
                showAlert('‚ùå Por favor describe qu√© otros materiales necesitas o desactiva la opci√≥n', 'danger');
                return;
            }

            const fecha = document.getElementById('fecha').value;
            const puntoVenta = document.getElementById('puntoVenta').value.trim();
            const nombreCompleto = document.getElementById('nombreCompleto').value.trim();
            const telefono = document.getElementById('telefono').value.trim();

            let mensaje = `üì¶ *SOLICITUD DE MATERIAL KOKITO STAR* üì¶\n`;
            mensaje += `üè™ *PUNTO DE VENTA: ${puntoVenta.toUpperCase()}*\n\n`;
            
            mensaje += "üë§ *INFORMACI√ìN PERSONAL:*\n";
            mensaje += `üìÖ *Fecha:* ${fecha}\n`;
            mensaje += `üè™ *Punto de venta:* ${puntoVenta}\n`;
            mensaje += `üë§ *Nombre:* ${nombreCompleto}\n`;
            mensaje += `‚òéÔ∏è *Tel√©fono:* ${telefono}\n\n`;
            
            // Motivos regulares
            const motivosRegularesSeleccionados = Object.keys(selectedMotivos).filter(motivo => selectedMotivos[motivo] > 0);
            if (motivosRegularesSeleccionados.length > 0) {
                mensaje += "üé® *MOTIVOS REGULARES:*\n";
                motivosRegularesSeleccionados.forEach(motivo => {
                    const cantidad = selectedMotivos[motivo];
                    mensaje += `‚Ä¢ ${motivo}: ${cantidad} paquete${cantidad > 1 ? 's' : ''}\n`;
                });
                mensaje += "\n";
            }
            
            // Motivos de temporada
            if (motivosTemporadaValidos.length > 0) {
                mensaje += "‚ú® *MOTIVOS DE TEMPORADA:*\n";
                motivosTemporadaValidos.forEach(motivo => {
                    mensaje += `‚Ä¢ ${motivo.nombre}: ${motivo.cantidad} paquete${motivo.cantidad > 1 ? 's' : ''}\n`;
                });
                mensaje += "\n";
            }
            
            // Productos adicionales
            const hasProductosAdicionales = Object.values(productosAdicionales).some(selected => selected === true);
            if (hasProductosAdicionales) {
                mensaje += "üß™ *PRODUCTOS ADICIONALES:*\n";
                if (productosAdicionales.pegaMagica) {
                    mensaje += `‚Ä¢ ‚úÖ Pega M√°gica\n`;
                }
                if (productosAdicionales.transfer) {
                    mensaje += `‚Ä¢ ‚úÖ Transfer\n`;
                }
                if (productosAdicionales.publicidad) {
                    mensaje += `‚Ä¢ ‚úÖ Publicidad\n`;
                }
                if (productosAdicionales.otrosMateriales) {
                    mensaje += `‚Ä¢ ‚úÖ Otros Materiales: ${otrosMaterialesTexto}\n`;
                }
                mensaje += "\n";
            }
            
            // Resumen solo si hay motivos
            const totalPaquetes = getTotalPaquetes();
            if (totalPaquetes > 0 || motivosTemporadaValidos.length > 0) {
                mensaje += `üìä *RESUMEN MOTIVOS:*\n`;
                mensaje += `‚Ä¢ Total paquetes: ${totalPaquetes}\n`;
                mensaje += `‚Ä¢ Total stencils: ${getTotalStencils()}\n\n`;
            }
            
            // Colores solo si hay algunos seleccionados
            if (selectedColores.length > 0) {
                mensaje += "üåà *COLORES DE GLITTER SOLICITADOS:*\n";
                selectedColores.forEach(index => {
                    mensaje += `${colores[index].emoji} ${colores[index].name}\n`;
                });
                mensaje += "\n";
            }
            
            mensaje += "¬°Gracias por tu solicitud! üé®‚ú®";
            
            // Enviar por WhatsApp
            const numeroWhatsApp = "573004081897";
            const urlWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensaje)}`;
            window.open(urlWhatsApp, '_blank');
            
            showAlert('‚úÖ ¬°Solicitud enviada por WhatsApp! Pronto recibir√°s respuesta üéâ', 'success');
        }

        // Inicializar la aplicaci√≥n cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', function() {
            // No inicializar aqu√≠, se hace despu√©s de la validaci√≥n
            console.log('DOM listo, esperando validaci√≥n...');
        });
    </script>
</body>
</html>Button();
            clearAlerts();
        }

        function decreaseQuantity(motivo) {
            if (selectedMotivos[motivo] > 0) {
                selectedMotivos[motivo]--;
                const input = document.getElementById(`qty-input-${motivo}`);
                if (input) {
                    input.value = selectedMotivos[motivo];
                }
                updateCounters();
                updateSummary();
                updateWhatsAppButton();
                clearAlerts();
            }
        }

        function updateQuantityFromInput(motivo) {
            const input = document.getElementById(`qty-input-${motivo}`);
            if (!input) return;
            
            let value = parseInt(input.value) || 0;
            
            if (value < 0) value = 0;
            if (value > 999) value = 999;
            
            selectedMotivos[motivo] = value;
            input.value = value;
            
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
            clearAlerts();
        }

        function handleEnterKey(event, motivo) {
            if (event.key === 'Enter') {
                event.preventDefault();
                updateQuantityFromInput(motivo);
                event.target.blur();
            }
        }

        function toggleColor(index) {
            const colorItem = document.getElementById(`color-${index}`);
            if (!colorItem) return;
            
            const colorIndex = selectedColores.indexOf(index);
            
            if (colorIndex === -1) {
                selectedColores.push(index);
                colorItem.classList.add('selected');
            } else {
                selectedColores.splice(colorIndex, 1);
                colorItem.classList.remove('selected');
            }
            
            updateCounters();
            updateSummary();
            updateWhatsApp<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kokito Star - Solicitud de Material</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: url('motivos/FONDO.png') center center;
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
            padding: 20px;
            padding-top: 100px;
            color: white;
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            padding: 15px 20px;
            z-index: 1000;
            border-bottom: 2px solid #E50695;
        }

        .progress-container {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 20px;
        }

        .progress-step {
            display: flex;
            align-items: center;
            position: relative;
        }

        .progress-step:not(:last-child) {
            margin-right: 20px;
        }

        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #666;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.5s ease;
            position: relative;
            z-index: 2;
        }

        .step-circle.active {
            background: #E50695;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(229, 6, 149, 0.5);
        }

        .step-circle.completed {
            background: #28a745;
            animation: checkBounce 0.6s ease;
        }

        .step-circle.completed::after {
            content: '‚úì';
            font-size: 16px;
            animation: checkAppear 0.4s ease 0.2s both;
        }

        .step-line {
            flex: 1;
            height: 3px;
            background: #666;
            margin: 0 10px;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .step-line.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #E50695, #ff69b4);
            animation: lineProgress 0.8s ease;
        }

        .step-label {
            position: absolute;
            top: 35px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            white-space: nowrap;
            color: #ccc;
            transition: color 0.3s ease;
        }

        .step-circle.active + .step-label,
        .step-circle.completed + .step-label {
            color: #E50695;
            font-weight: bold;
        }

        @keyframes checkBounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1.1); }
        }

        @keyframes checkAppear {
            0% { opacity: 0; transform: scale(0); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes lineProgress {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        @keyframes countUp {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); color: #E50695; }
            100% { transform: scale(1); }
        }

        @keyframes fadeInUp {
            0% { opacity: 0; transform: translateY(30px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInRight {
            0% { opacity: 0; transform: translateX(50px); }
            100% { opacity: 1; transform: translateX(0); }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease both;
        }

        .slide-in {
            animation: slideInRight 0.5s ease both;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(229, 6, 149, 0.3);
            overflow: hidden;
            border: 2px solid #E50695;
        }

        .logo-section {
            background: #000000;
            padding: 60px 20px;
            text-align: center;
            border-bottom: 3px solid #E50695;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-container {
            width: 100%;
            max-width: 600px;
        }

        .logo-image {
            width: 100%;
            height: auto;
            max-height: 180px;
            object-fit: contain;
            border-radius: 10px;
        }

        .header {
            background: linear-gradient(135deg, #E50695, #ff69b4);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
            color: white;
        }

        .info-section {
            background: linear-gradient(135deg, #E50695, #ff69b4);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
            border: 2px solid #E50695;
            color: white;
        }

        .info-section h3 {
            font-size: 1.6em;
            margin-bottom: 15px;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            font-size: 1.1em;
            font-weight: bold;
        }

        .instructions {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #E50695;
        }

        .instructions h3 {
            color: #E50695;
            font-size: 1.4em;
            margin-bottom: 15px;
            text-align: center;
        }

        .step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(229, 6, 149, 0.1);
            border-radius: 8px;
        }

        .step-number {
            background: #E50695;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-text {
            flex: 1;
        }

        .counters {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #E50695, #ff69b4);
            border-radius: 15px;
            color: white;
        }

        .counter {
            text-align: center;
        }

        .counter-number {
            font-size: 2.5em;
            font-weight: bold;
            display: block;
            transition: all 0.3s ease;
        }

        .counter-number.animate {
            animation: countUp 0.5s ease;
        }

        .counter-label {
            font-size: 1.1em;
            margin-top: 5px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            font-family: 'Arial Black', Arial, sans-serif;
            font-weight: 900;
            font-size: 1.8em;
            color: white;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #E50695;
        }

        .motivos-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
            padding: 0 10px;
            max-width: 100%;
            box-sizing: border-box;
        }

        .motivo-item {
            background: rgba(0, 0, 0, 0.9);
            border: 3px solid #E50695;
            border-radius: 15px;
            padding: 15px;
            transition: all 0.3s ease;
            color: white;
            display: flex;
            align-items: center;
            gap: 12px;
            min-height: 120px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow: hidden;
        }

        .motivo-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(229, 6, 149, 0.4);
            border-color: #E50695;
        }

        .motivo-item.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .motivo-image-container {
            background: #E50695;
            border-radius: 12px;
            padding: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 100px;
            min-height: 100px;
            width: 100px;
            height: 100px;
            flex-shrink: 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .motivo-image-container:hover {
            background: #ff69b4;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(229, 6, 149, 0.4);
        }

        .motivo-image {
            width: 80px;
            height: 80px;
            object-fit: contain;
            pointer-events: none;
        }

        .motivo-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-width: 0;
            overflow: hidden;
        }

        .motivo-name {
            font-family: Arial, sans-serif;
            font-weight: normal;
            color: white;
            font-size: 0.9em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-right: 10px;
            min-width: 0;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 4px;
            flex-shrink: 0;
            min-width: 140px;
        }

        .btn-quantity {
            background: white;
            color: #E50695;
            border: 2px solid white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .btn-quantity:hover {
            background: #E50695;
            color: white;
            transform: scale(1.1);
        }

        .btn-quantity:disabled {
            background: #ccc;
            color: #666;
            border-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .quantity-display {
            background: #000;
            color: white;
            border: 2px solid white;
            border-radius: 8px;
            width: 55px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1em;
            font-weight: bold;
            font-family: 'Arial Black', Arial, sans-serif;
            text-align: center;
            padding: 0 5px;
        }

        .quantity-input {
            background: #000;
            color: white;
            border: 2px solid white;
            border-radius: 8px;
            width: 50px;
            height: 32px;
            font-size: 0.9em;
            font-weight: bold;
            font-family: 'Arial Black', Arial, sans-serif;
            text-align: center;
            padding: 0;
            flex-shrink: 0;
        }

        .quantity-input:focus {
            outline: none;
            border-color: #E50695;
            box-shadow: 0 0 0 2px rgba(229, 6, 149, 0.3);
        }

        .quantity-input::-webkit-outer-spin-button,
        .quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .quantity-input[type=number] {
            -moz-appearance: textfield;
        }

        .colores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .color-item {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border: 2px solid #E50695;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            color: white;
        }

        .color-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.3);
        }

        .color-item.selected {
            border-color: #E50695;
            background: linear-gradient(135deg, #E50695, #ff69b4);
            color: white;
            transform: translateY(-2px);
        }

        .color-emoji {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .shipping-form {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #E50695;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            font-family: Arial, sans-serif;
            font-weight: normal;
            margin-bottom: 8px;
            color: white;
            font-size: 1.1em;
        }

        .form-input {
            padding: 12px;
            border: 2px solid #E50695;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: #000;
            color: white;
        }

        .form-input:focus {
            outline: none;
            border-color: #E50695;
            box-shadow: 0 0 0 3px rgba(229, 6, 149, 0.1);
        }

        .summary-section {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #E50695;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(229, 6, 149, 0.2);
        }

        .summary-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .summary-label {
            font-family: Arial, sans-serif;
            color: white;
        }

        .summary-value {
            font-family: 'Arial Black', Arial, sans-serif;
            color: #E50695;
            font-weight: bold;
        }

        .whatsapp-btn {
            background: linear-gradient(135deg, #25d366, #20ba5e);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.3em;
            border-radius: 50px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4);
        }

        .whatsapp-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .back-btn {
            background: linear-gradient(135deg, #666, #888);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            display: block;
            margin: 20px auto 0;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            background: linear-gradient(135deg, #777, #999);
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
        }

        .alert-warning {
            background: #ff8c00;
            border: 1px solid #ff7f00;
            color: white;
        }

        .alert-danger {
            background: #dc3545;
            border: 1px solid #c82333;
            color: white;
        }

        .alert-success {
            background: #28a745;
            border: 1px solid #1e7e34;
            color: white;
        }

        .temporada-section {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #E50695;
        }

        .temporada-item {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #E50695;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .temporada-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.3);
        }

        .temporada-inputs {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .temporada-name-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #E50695;
            border-radius: 8px;
            background: #000;
            color: white;
            font-size: 1em;
            min-width: 200px;
        }

        .temporada-name-input:focus {
            outline: none;
            border-color: #ff69b4;
            box-shadow: 0 0 0 2px rgba(229, 6, 149, 0.3);
        }

        .temporada-name-input::placeholder {
            color: #999;
        }

        .temporada-quantity {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .temporada-quantity-input {
            width: 60px;
            height: 40px;
            padding: 8px;
            border: 2px solid #E50695;
            border-radius: 8px;
            background: #000;
            color: white;
            font-size: 1em;
            font-weight: bold;
            text-align: center;
        }

        .temporada-quantity-input:focus {
            outline: none;
            border-color: #ff69b4;
            box-shadow: 0 0 0 2px rgba(229, 6, 149, 0.3);
        }

        .btn-remove-temporada {
            background: #dc3545;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .btn-remove-temporada:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .btn-add-temporada {
            background: linear-gradient(135deg, #E50695, #ff69b4);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            display: block;
            margin: 20px auto 0;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-add-temporada:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.4);
        }

        .productos-adicionales {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #E50695;
        }

        .producto-item {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #E50695;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .producto-item:last-child {
            margin-bottom: 0;
        }

        .producto-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.3);
        }

        .producto-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .producto-icon {
            font-size: 2.5em;
            background: #E50695;
            border-radius: 12px;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 70px;
            min-height: 70px;
        }

        .producto-details {
            flex: 1;
        }

        .producto-name {
            font-size: 1.2em;
            font-weight: bold;
            color: white;
            margin-bottom: 5px;
        }

        .producto-description {
            font-size: 0.9em;
            color: #ccc;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-shrink: 0;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
            cursor: pointer;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #666;
            transition: 0.4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #E50695;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .toggle-slider:hover {
            box-shadow: 0 0 8px rgba(229, 6, 149, 0.3);
        }

        .toggle-label {
            font-weight: bold;
            font-size: 1.1em;
            color: #ccc;
            min-width: 25px;
            transition: all 0.3s ease;
        }

        .toggle-label.active {
            color: #E50695;
        }

        .otros-materiales-input-container {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #E50695;
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .otros-materiales-input-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.3);
        }

        .otros-materiales-textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #E50695;
            border-radius: 8px;
            background: #000;
            color: white;
            font-size: 1em;
            font-family: Arial, sans-serif;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .otros-materiales-textarea:focus {
            outline: none;
            border-color: #ff69b4;
            box-shadow: 0 0 0 3px rgba(229, 6, 149, 0.3);
        }

        .otros-materiales-textarea::placeholder {
            color: #999;
            font-style: italic;
            line-height: 1.5;
        }

        /* Status indicator for button */
        .button-status {
            text-align: center;
            margin: 10px 0;
            font-size: 0.9em;
            color: #ccc;
        }

        .button-status.ready {
            color: #28a745;
        }

        .button-status.incomplete {
            color: #ff8c00;
        }

        @media (max-width: 768px) {
            .counters {
                flex-direction: column;
                gap: 15px;
            }
            
            .motivos-grid {
                grid-template-columns: 1fr;
            }
            
            .colores-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
    
        @media (max-width: 600px) {
            .motivos-grid {
                grid-template-columns: 1fr;
                padding: 0 5px;
                gap: 12px;
            }

            .motivo-item {
                flex-direction: column;
                align-items: center;
                text-align: center;
                padding: 15px;
                min-height: auto;
                gap: 15px;
