<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kokito Star - Solicitud de Material</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: url('motivos/FONDO.png') center center;
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
            padding: 20px;
            padding-top: 100px;
            color: white;
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            padding: 15px 20px;
            z-index: 1000;
            border-bottom: 2px solid #E50695;
        }

        .progress-container {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 20px;
        }

        .progress-step {
            display: flex;
            align-items: center;
            position: relative;
        }

        .progress-step:not(:last-child) {
            margin-right: 20px;
        }

        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #666;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.5s ease;
            position: relative;
            z-index: 2;
        }

        .step-circle.active {
            background: #E50695;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(229, 6, 149, 0.5);
        }

        .step-circle.completed {
            background: #28a745;
            animation: checkBounce 0.6s ease;
        }

        .step-circle.completed::after {
            content: '✓';
            font-size: 16px;
            animation: checkAppear 0.4s ease 0.2s both;
        }

        .step-line {
            flex: 1;
            height: 3px;
            background: #666;
            margin: 0 10px;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .step-line.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #E50695, #ff69b4);
            animation: lineProgress 0.8s ease;
        }

        .step-label {
            position: absolute;
            top: 35px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            white-space: nowrap;
            color: #ccc;
            transition: color 0.3s ease;
        }

        .step-circle.active + .step-label,
        .step-circle.completed + .step-label {
            color: #E50695;
            font-weight: bold;
        }

        @keyframes checkBounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1.1); }
        }

        @keyframes checkAppear {
            0% { opacity: 0; transform: scale(0); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes lineProgress {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        @keyframes countUp {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); color: #E50695; }
            100% { transform: scale(1); }
        }

        @keyframes fadeInUp {
            0% { opacity: 0; transform: translateY(30px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInRight {
            0% { opacity: 0; transform: translateX(50px); }
            100% { opacity: 1; transform: translateX(0); }
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 20%, 50%, 80%, 100% { transform: translateX(0); }
            10%, 30%, 70%, 90% { transform: translateX(-5px); }
            40%, 60% { transform: translateX(5px); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-3px); }
        }

        @keyframes glow {
            0% { text-shadow: 0 0 5px rgba(229, 6, 149, 0.5); }
            50% { text-shadow: 0 0 20px rgba(229, 6, 149, 0.8), 0 0 30px rgba(229, 6, 149, 0.6); }
            100% { text-shadow: 0 0 5px rgba(229, 6, 149, 0.5); }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease both;
        }

        .slide-in {
            animation: slideInRight 0.5s ease both;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(229, 6, 149, 0.3);
            overflow: hidden;
            border: 2px solid #E50695;
        }

        .logo-section {
            background: #000000;
            padding: 60px 20px;
            text-align: center;
            border-bottom: 3px solid #E50695;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-container {
            width: 100%;
            max-width: 600px;
        }

        .logo-image {
            width: 100%;
            height: auto;
            max-height: 180px;
            object-fit: contain;
            border-radius: 10px;
        }

        .header {
            background: linear-gradient(135deg, #E50695, #ff69b4);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
            color: white;
        }

        .info-section {
            background: linear-gradient(135deg, #E50695, #ff69b4);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
            border: 2px solid #E50695;
            color: white;
        }

        .info-section h3 {
            font-size: 1.6em;
            margin-bottom: 15px;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            font-size: 1.1em;
            font-weight: bold;
        }

        .instructions {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #E50695;
        }

        .instructions h3 {
            color: #E50695;
            font-size: 1.1em;
            margin-bottom: 10px;
            text-align: center;
        }

        .step {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding: 6px;
            background: rgba(229, 6, 149, 0.1);
            border-radius: 6px;
        }

        .step-number {
            background: #E50695;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8em;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .step-text {
            flex: 1;
            font-size: 0.85em;
            line-height: 1.3;
        }

        .counters {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #E50695, #ff69b4);
            border-radius: 15px;
            color: white;
        }

        .counter {
            text-align: center;
        }

        .counter-number {
            font-size: 2.5em;
            font-weight: bold;
            display: block;
            transition: all 0.3s ease;
        }

        .counter-number.animate {
            animation: countUp 0.5s ease, glow 0.8s ease;
        }

        .counter-label {
            font-size: 1.1em;
            margin-top: 5px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            font-family: 'Arial Black', Arial, sans-serif;
            font-weight: 900;
            font-size: 1.8em;
            color: white;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #E50695;
        }

        /* NUEVO DISEÑO DINÁMICO PARA MOTIVOS */
        .motivos-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 30px;
            padding: 0 5px;
        }

        .motivo-item {
            background: linear-gradient(145deg, rgba(229, 6, 149, 0.1), rgba(255, 105, 180, 0.05));
            backdrop-filter: blur(10px);
            border: 2px solid rgba(229, 6, 149, 0.3);
            border-radius: 20px;
            padding: 15px;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 12px;
            min-height: auto;
            width: 100%;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .motivo-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.6s ease;
        }

        .motivo-item:hover::before {
            left: 100%;
        }

        .motivo-item:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: #E50695;
            background: linear-gradient(145deg, rgba(229, 6, 149, 0.2), rgba(255, 105, 180, 0.1));
            box-shadow: 
                0 15px 35px rgba(229, 6, 149, 0.3),
                0 0 0 1px rgba(229, 6, 149, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .motivo-item.selected {
            border-color: #E50695;
            background: linear-gradient(145deg, rgba(229, 6, 149, 0.25), rgba(255, 105, 180, 0.15));
            box-shadow: 
                0 8px 25px rgba(229, 6, 149, 0.4),
                0 0 0 2px rgba(229, 6, 149, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transform: translateY(-4px);
            animation: float 2s ease-in-out infinite;
        }

        .motivo-item.disabled {
            opacity: 0.4;
            pointer-events: none;
            filter: grayscale(100%);
        }

        .motivo-image-container {
            background: #ffffff;
            border-radius: 50%;
            padding: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 120px;
            min-height: 120px;
            flex-shrink: 0;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .motivo-image-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #E50695, #ff69b4, #ff1493, #E50695);
            border-radius: 50%;
            z-index: -1;
            animation: rotate 4s linear infinite;
        }

        .motivo-image-container:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 
                0 0 30px rgba(229, 6, 149, 0.6),
                0 0 50px rgba(229, 6, 149, 0.3),
                0 8px 25px rgba(0,0,0,0.15);
            animation-play-state: paused;
        }

        .motivo-image {
            width: 100px;
            height: 100px;
            object-fit: contain;
            pointer-events: none;
            transition: all 0.3s ease;
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2));
            z-index: 2;
            position: relative;
        }

        /* Máscara blanca SOLO para hover/touch temporal - NO para elementos seleccionados */
        .motivo-image-container:hover:not(.touching) .motivo-image {
            transform: scale(1.1);
            filter: 
                brightness(0) 
                invert(1) 
                drop-shadow(0 4px 12px rgba(0,0,0,0.3));
        }

        /* Estado normal para elementos seleccionados - SIN máscara */
        .motivo-item.selected .motivo-image {
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2)) brightness(1.05);
        }

        .motivo-item.selected .motivo-image-container:hover .motivo-image {
            transform: scale(1.1);
            filter: drop-shadow(0 4px 12px rgba(0,0,0,0.3)) brightness(1.1);
        }

        .motivo-content {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
            align-items: center;
        }

        .motivo-name {
            font-family: Arial, sans-serif;
            font-weight: normal;
            color: white;
            font-size: 1em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            text-align: center;
            overflow-wrap: break-word;
            line-height: 1.2;
            margin-bottom: 4px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
        }

        .btn-quantity {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(10px);
            color: #E50695;
            border: 2px solid rgba(229, 6, 149, 0.3);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .btn-quantity::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(229, 6, 149, 0.2), transparent);
            border-radius: 50%;
            transition: all 0.3s ease;
            transform: translate(-50%, -50%);
        }

        .btn-quantity:hover::before {
            width: 100%;
            height: 100%;
        }

        .btn-quantity:hover {
            background: linear-gradient(145deg, #E50695, #ff69b4);
            color: white;
            transform: scale(1.1);
            border-color: #E50695;
            box-shadow: 
                0 0 20px rgba(229, 6, 149, 0.5),
                0 4px 15px rgba(229, 6, 149, 0.3);
        }

        .btn-quantity:active {
            transform: scale(0.95);
        }

        .btn-quantity:disabled {
            background: rgba(102, 102, 102, 0.3);
            color: #666;
            border-color: rgba(102, 102, 102, 0.3);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .quantity-input {
            background: linear-gradient(145deg, rgba(229, 6, 149, 0.2), rgba(255, 105, 180, 0.1));
            backdrop-filter: blur(10px);
            color: white;
            border: 2px solid rgba(229, 6, 149, 0.4);
            border-radius: 12px;
            width: 50px;
            height: 36px;
            font-size: 1em;
            font-weight: bold;
            font-family: 'Arial Black', Arial, sans-serif;
            text-align: center;
            padding: 0;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .quantity-input.animate {
            animation: pulse 0.4s ease;
            background: linear-gradient(145deg, #E50695, #ff69b4);
            border-color: #E50695;
            box-shadow: 
                0 0 15px rgba(229, 6, 149, 0.6),
                inset 0 2px 4px rgba(0,0,0,0.2);
        }

        .quantity-input:focus {
            outline: none;
            border-color: #E50695;
            box-shadow: 0 0 0 2px rgba(229, 6, 149, 0.3);
        }

        .quantity-input::-webkit-outer-spin-button,
        .quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .quantity-input[type=number] {
            -moz-appearance: textfield;
        }

        /* NUEVA SECCIÓN DE KITS */
        .kits-section {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #E50695;
        }

        .kit-importance {
            background: rgba(229, 6, 149, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #E50695;
        }

        .kit-importance h4 {
            color: #E50695;
            font-size: 1.3em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .kit-importance-points {
            list-style: none;
            padding: 0;
        }

        .kit-importance-points li {
            padding: 8px 0;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .kit-item {
            background: linear-gradient(145deg, rgba(229, 6, 149, 0.1), rgba(255, 105, 180, 0.05));
            backdrop-filter: blur(10px);
            border: 2px solid rgba(229, 6, 149, 0.3);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .kit-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.6s ease;
        }

        .kit-item:hover::before {
            left: 100%;
        }

        .kit-item:hover {
            transform: translateY(-5px);
            border-color: #E50695;
            background: linear-gradient(145deg, rgba(229, 6, 149, 0.2), rgba(255, 105, 180, 0.1));
            box-shadow: 
                0 10px 25px rgba(229, 6, 149, 0.3),
                0 0 0 1px rgba(229, 6, 149, 0.1);
        }

        .kit-image-container {
            background: #ffffff;
            border-radius: 50%;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 100px;
            min-height: 100px;
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .kit-image-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #E50695, #ff69b4, #ff1493, #E50695);
            border-radius: 50%;
            z-index: -1;
            animation: rotate 4s linear infinite;
        }

        .kit-image {
            width: 70px;
            height: 70px;
            object-fit: contain;
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2));
        }

        .kit-details {
            flex: 1;
        }

        .kit-name {
            font-size: 1.4em;
            font-weight: bold;
            color: white;
            margin-bottom: 8px;
        }

        .kit-description {
            color: #ccc;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .kit-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .kit-quantity-label {
            color: #E50695;
            font-weight: bold;
            font-size: 1.1em;
        }

        .kit-quantity-input {
            background: linear-gradient(145deg, rgba(229, 6, 149, 0.2), rgba(255, 105, 180, 0.1));
            backdrop-filter: blur(10px);
            color: white;
            border: 2px solid rgba(229, 6, 149, 0.4);
            border-radius: 12px;
            width: 60px;
            height: 40px;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
        }

        .kit-quantity-input:focus {
            outline: none;
            border-color: #E50695;
            box-shadow: 0 0 0 3px rgba(229, 6, 149, 0.3);
        }

        .kit-max-info {
            color: #ff8c00;
            font-size: 0.9em;
            font-style: italic;
        }

        .colores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .color-item {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border: 2px solid #E50695;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            color: white;
        }

        .color-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.3);
        }

        .color-item.selected {
            border-color: #E50695;
            background: linear-gradient(135deg, #E50695, #ff69b4);
            color: white;
            transform: translateY(-2px);
        }

        .color-emoji {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .shipping-form {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #E50695;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            font-family: Arial, sans-serif;
            font-weight: normal;
            margin-bottom: 8px;
            color: white;
            font-size: 1.1em;
        }

        .form-input {
            padding: 12px;
            border: 2px solid #E50695;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: #000;
            color: white;
        }

        .form-input:focus {
            outline: none;
            border-color: #E50695;
            box-shadow: 0 0 0 3px rgba(229, 6, 149, 0.1);
        }

        .summary-section {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #E50695;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(229, 6, 149, 0.2);
        }

        .summary-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .summary-label {
            font-family: Arial, sans-serif;
            color: white;
        }

        .summary-value {
            font-family: 'Arial Black', Arial, sans-serif;
            color: #E50695;
            font-weight: bold;
        }

        .whatsapp-btn {
            background: linear-gradient(135deg, #25d366, #20ba5e);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.3em;
            border-radius: 50px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4);
        }

        .whatsapp-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
        }

        .alert-warning {
            background: #ff8c00;
            border: 1px solid #ff7f00;
            color: white;
        }

        .alert-danger {
            background: #dc3545;
            border: 1px solid #c82333;
            color: white;
        }

        .alert-success {
            background: #28a745;
            border: 1px solid #1e7e34;
            color: white;
        }

        .temporada-section {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #E50695;
        }

        .temporada-item {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #E50695;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .temporada-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.3);
        }

        .temporada-inputs {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .temporada-name-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #E50695;
            border-radius: 8px;
            background: #000;
            color: white;
            font-size: 1em;
            min-width: 200px;
        }

        .temporada-name-input:focus {
            outline: none;
            border-color: #ff69b4;
            box-shadow: 0 0 0 2px rgba(229, 6, 149, 0.3);
        }

        .temporada-name-input::placeholder {
            color: #999;
        }

        .temporada-quantity {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .temporada-quantity-input {
            width: 60px;
            height: 40px;
            padding: 8px;
            border: 2px solid #E50695;
            border-radius: 8px;
            background: #000;
            color: white;
            font-size: 1em;
            font-weight: bold;
            text-align: center;
        }

        .temporada-quantity-input:focus {
            outline: none;
            border-color: #ff69b4;
            box-shadow: 0 0 0 2px rgba(229, 6, 149, 0.3);
        }

        .btn-remove-temporada {
            background: #dc3545;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .btn-remove-temporada:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .btn-add-temporada {
            background: linear-gradient(135deg, #E50695, #ff69b4);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            display: block;
            margin: 20px auto 0;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-add-temporada:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.4);
        }

        .productos-adicionales {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #E50695;
        }

        .producto-item {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #E50695;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .producto-item:last-child {
            margin-bottom: 0;
        }

        .producto-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.3);
        }

        .producto-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .producto-icon {
            font-size: 2.5em;
            background: #E50695;
            border-radius: 12px;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 70px;
            min-height: 70px;
        }

        .producto-details {
            flex: 1;
        }

        .producto-name {
            font-size: 1.2em;
            font-weight: bold;
            color: white;
            margin-bottom: 5px;
        }

        .producto-description {
            font-size: 0.9em;
            color: #ccc;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-shrink: 0;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
            cursor: pointer;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #666;
            transition: 0.4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #E50695;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .toggle-slider:hover {
            box-shadow: 0 0 8px rgba(229, 6, 149, 0.3);
        }

        .toggle-label {
            font-weight: bold;
            font-size: 1.1em;
            color: #ccc;
            min-width: 25px;
            transition: all 0.3s ease;
        }

        .toggle-label.active {
            color: #E50695;
        }

        .otros-materiales-input-container {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #E50695;
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .otros-materiales-input-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 6, 149, 0.3);
        }

        .otros-materiales-textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #E50695;
            border-radius: 8px;
            background: #000;
            color: white;
            font-size: 1em;
            font-family: Arial, sans-serif;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .otros-materiales-textarea:focus {
            outline: none;
            border-color: #ff69b4;
            box-shadow: 0 0 0 3px rgba(229, 6, 149, 0.3);
        }

        .otros-materiales-textarea::placeholder {
            color: #999;
            font-style: italic;
            line-height: 1.5;
        }

        .button-status {
            text-align: center;
            margin: 10px 0;
            font-size: 0.9em;
            color: #ccc;
        }

        .button-status.ready {
            color: #28a745;
        }

        .button-status.incomplete {
            color: #ff8c00;
        }

        /* Función para manejar errores de carga de imágenes */
        .image-placeholder {
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            background: #ffffff;
            border-radius: 12px;
            color: #E50695;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* MEDIA QUERIES RESPONSIVOS */
        @media (max-width: 768px) {
            .counters {
                flex-direction: column;
                gap: 15px;
            }
            
            /* Mantener 3 columnas pero ajustar espaciado en tablets */
            .motivos-grid {
                gap: 10px;
            }
            
            .colores-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .kit-item {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }

            .kit-controls {
                justify-content: center;
            }
        }

        /* MEDIA QUERY PRINCIPAL PARA MÓVILES */
        @media (max-width: 600px) {
            /* AJUSTAR ESPACIADO EN MÓVILES PARA 3 COLUMNAS */
            .motivos-grid {
                gap: 6px;
                padding: 0;
            }

            /* AJUSTAR TAMAÑOS PARA MÓVILES */
            .motivo-item {
                padding: 8px;
                gap: 6px;
                border-radius: 15px;
            }

            /* IMÁGENES AJUSTADAS PARA MÓVILES */
            .motivo-image-container {
                min-width: 70px;
                min-height: 70px;
                padding: 6px;
            }

            .motivo-image {
                width: 60px;
                height: 60px;
            }

            .motivo-name {
                font-size: 0.85em;
            }

            /* CONTROLES DE CANTIDAD MÁS COMPACTOS */
            .quantity-controls {
                gap: 6px;
            }

            .btn-quantity {
                width: 30px;
                height: 30px;
                font-size: 16px;
            }

            .quantity-input {
                width: 42px;
                height: 30px;
                font-size: 1em;
                border-radius: 8px;
            }

            .kit-image-container {
                min-width: 70px;
                min-height: 70px;
                padding: 10px;
            }

            .kit-image {
                width: 50px;
                height: 50px;
            }

            /* AJUSTES ADICIONALES */
            .section-title {
                font-size: 1.4em;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .header p {
                font-size: 1em;
            }

            .content {
                padding: 20px;
            }

            .counters {
                padding: 15px;
            }

            .counter-number {
                font-size: 2em;
            }

            .counter-label {
                font-size: 0.9em;
            }

            .producto-item {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .producto-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .temporada-item {
                flex-direction: column;
                gap: 15px;
                text-align: center;
                padding: 20px 15px;
            }
            
            .temporada-inputs {
                flex-direction: column;
                gap: 15px;
                width: 100%;
            }
            
            .temporada-name-input {
                min-width: auto;
                width: 100%;
                text-align: center;
            }
            
            .temporada-quantity {
                justify-content: center;
                gap: 10px;
            }
            
            .toggle-container {
                justify-content: center;
                flex-direction: row;
                gap: 10px;
            }
            
            .otros-materiales-textarea {
                font-size: 1em;
                min-height: 80px;
            }
            
            .otros-materiales-input-container {
                padding: 15px;
                margin-top: 10px;
            }
        }

        /* MEDIA QUERY PARA PANTALLAS MUY PEQUEÑAS */
        @media (max-width: 400px) {
            .motivo-image-container {
                min-width: 60px;
                min-height: 60px;
                padding: 4px;
            }

            .motivo-image {
                width: 50px;
                height: 50px;
            }

            .motivo-name {
                font-size: 0.75em;
            }

            .btn-quantity {
                width: 26px;
                height: 26px;
                font-size: 14px;
            }

            .quantity-input {
                width: 38px;
                height: 26px;
                font-size: 0.9em;
                border-radius: 6px;
            }

            .quantity-controls {
                gap: 4px;
            }

            .kit-image-container {
                min-width: 60px;
                min-height: 60px;
                padding: 8px;
            }

            .kit-image {
                width: 44px;
                height: 44px;
            }
        }

        /* Efectos especiales para touch en móviles */
        @media (hover: none) and (pointer: coarse) {
            .motivo-image-container:active {
                transform: scale(1.05);
                transition: all 0.1s ease;
            }
            
            /* Máscara blanca temporal para touch SOLO si no está seleccionado */
            .motivo-image-container:active:not(.selected-touch) .motivo-image {
                transform: scale(1.05);
                filter: 
                    brightness(0) 
                    invert(1) 
                    drop-shadow(0 2px 8px rgba(0,0,0,0.2));
                transition: all 0.1s ease;
            }
            
            /* Touch en elementos seleccionados - SIN máscara */
            .motivo-item.selected .motivo-image-container:active .motivo-image {
                transform: scale(1.05);
                filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2)) brightness(1.1);
                transition: all 0.1s ease;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar">
        <div class="progress-container">
            <div class="progress-step">
                <div class="step-circle active" id="step1">1</div>
                <div class="step-label">Motivos</div>
                <div class="step-line" id="line1"></div>
            </div>
            <div class="progress-step">
                <div class="step-circle" id="step2">2</div>
                <div class="step-label">Colores</div>
                <div class="step-line" id="line2"></div>
            </div>
            <div class="progress-step">
                <div class="step-circle" id="step3">3</div>
                <div class="step-label">Datos</div>
                <div class="step-line" id="line3"></div>
            </div>
            <div class="progress-step">
                <div class="step-circle" id="step4">4</div>
                <div class="step-label">Listo</div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="logo-section">
            <div class="logo-container">
                <img id="logoImage" src="motivos/LOGO_KOKITO.png" alt="Kokito Star Logo" class="logo-image">
            </div>
        </div>

        <div class="header">
            <h1>📦 SOLICITUD DE MATERIAL</h1>
            <p>Sistema para colaboradoras de Kokito Star</p>
        </div>

        <div class="content">
            <div class="info-section">
                <h3>👥 INFORMACIÓN IMPORTANTE</h3>
                <div class="info-item">
                    🎨 Cada solicitud es individual y flexible
                </div>
                <div class="info-item">
                    📋 Puedes pedir solo lo que necesites: motivos, colores, kits o productos
                </div>
                <div class="info-item">
                    📦 Los pedidos se procesan según disponibilidad en inventario
                </div>
            </div>

            <div class="instructions">
                <h3>📋 ¿Cómo hacer tu solicitud?</h3>

                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-text">
                        <strong>Selecciona motivos:</strong> Elige los diseños que necesitas y la cantidad de paquetes (cada paquete = 30 stencils).
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-text">
                        <strong>Solicita kits:</strong> Si necesitas kits completos para tu punto de venta (máximo 5).
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-text">
                        <strong>Escoge colores:</strong> Selecciona los colores de glitter que prefieras.
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-text">
                        <strong>Completa datos:</strong> Llena el formulario con tu información personal y punto de venta.
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-text">
                        <strong>Envía solicitud:</strong> Revisa tu pedido y envía la solicitud por WhatsApp.
                    </div>
                </div>
            </div>

            <div class="counters">
                <div class="counter">
                    <span class="counter-number" id="totalPaquetes">0</span>
                    <span class="counter-label">Paquetes solicitados</span>
                </div>
                <div class="counter">
                    <span class="counter-number" id="totalKits">0</span>
                    <span class="counter-label">Kits solicitados</span>
                </div>
                <div class="counter">
                    <span class="counter-number" id="totalItems">0</span>
                    <span class="counter-label">Items adicionales</span>
                </div>
            </div>

            <div id="alerts"></div>

            <div class="section">
                <h2 class="section-title">🎨 Selecciona tus Motivos <span style="font-family: Arial, sans-serif; font-weight: normal;">(1 paquete = 30 stencils)</span></h2>
                <div class="motivos-grid" id="motivosGrid"></div>
            </div>

            <div class="section">
                <h2 class="section-title">🎁 Kits Completos para Punto de Venta</h2>
                <div class="kits-section">
                    <div class="kit-importance">
                        <h4>🌟 IMPORTANCIA DE LOS KITS EN TU PUNTO DE VENTA</h4>
                        <ul class="kit-importance-points">
                            <li>✅ <strong>Incrementa tus ventas:</strong> Los kits permiten ofrecer más opciones a tus clientes</li>
                            <li>🎯 <strong>Compromiso de venta:</strong> Al solicitar kits, te comprometes a promocionarlos activamente</li>
                            <li>🚀 <strong>Diversifica tu negocio:</strong> Amplia tu portafolio de productos Kokito Star</li>
                            <li>💎 <strong>Productos de alta calidad:</strong> Kits premium que generan mayor margen de ganancia</li>
                            <li>🎨 <strong>Experiencia completa:</strong> Ofrece soluciones integrales a tus clientes</li>
                        </ul>
                    </div>

                    <div class="kit-item">
                        <div class="kit-image-container">
                            <img src="motivos/K_kit.png" alt="Kit Kokito Star" class="kit-image" 
                                 onerror="this.style.display='none'; this.parentNode.innerHTML='🎁';">
                        </div>
                        <div class="kit-details">
                            <div class="kit-name">Kit Completo Kokito Star</div>
                            <div class="kit-description">
                                Kit completo con 30 motivos diferentes, 6 colores de glitter, pega mágica, transfer y todo lo necesario para ofrecer tatuajes temporales profesionales en tu punto de venta.
                            </div>
                            <div class="kit-controls">
                                <span class="kit-quantity-label">Cantidad:</span>
                                <input type="number" class="kit-quantity-input" id="kitQuantity" 
                                       min="0" max="5" value="0" 
                                       onchange="updateKitQuantity()" 
                                       onkeyup="updateKitQuantity()">
                                <span class="kit-max-info">(máximo 5 kits)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">✨ Motivos de Temporada <span style="font-family: Arial, sans-serif; font-weight: normal;">(Ej: Kuromi, My Melody, Stitch, Labubu, etc.)</span></h2>
                <div class="temporada-section">
                    <div class="temporada-info">
                        <p style="color: #ccc; margin-bottom: 15px; text-align: center;">
                            💡 Si necesitas motivos especiales de temporada, agrégalos aquí con el nombre exacto
                        </p>
                    </div>
                    <div id="motivosTemporadaContainer"></div>
                    <button type="button" class="btn-add-temporada" onclick="agregarMotivoTemporada()">
                        ➕ Agregar Motivo de Temporada
                    </button>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">🧪 Productos Adicionales</h2>
                <div class="productos-adicionales">
                    <div class="producto-item">
                        <div class="producto-info">
                            <div class="producto-icon">🧪</div>
                            <div class="producto-details">
                                <div class="producto-name">Pega Mágica</div>
                                <div class="producto-description">Para aplicar los tatuajes</div>
                            </div>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-pega-magica" onchange="toggleProductoAdicional('pegaMagica')">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="label-pega-magica">NO</span>
                        </div>
                    </div>
                    
                    <div class="producto-item">
                        <div class="producto-info">
                            <div class="producto-icon">📋</div>
                            <div class="producto-details">
                                <div class="producto-name">Transfer</div>
                                <div class="producto-description">Para transferir diseños</div>
                            </div>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-transfer" onchange="toggleProductoAdicional('transfer')">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="label-transfer">NO</span>
                        </div>
                    </div>

                    <div class="producto-item">
                        <div class="producto-info">
                            <div class="producto-icon">📢</div>
                            <div class="producto-details">
                                <div class="producto-name">Publicidad</div>
                                <div class="producto-description">Material promocional</div>
                            </div>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-publicidad" onchange="toggleProductoAdicional('publicidad')">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="label-publicidad">NO</span>
                        </div>
                    </div>

                    <div class="producto-item" id="otros-materiales-container">
                        <div class="producto-info">
                            <div class="producto-icon">📦</div>
                            <div class="producto-details">
                                <div class="producto-name">Otros Materiales</div>
                                <div class="producto-description">Especifica qué otros materiales necesitas</div>
                            </div>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-otros-materiales" onchange="toggleOtrosMateriales()">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="label-otros-materiales">NO</span>
                        </div>
                    </div>

                    <div class="otros-materiales-input-container" id="otros-materiales-input" style="display: none;">
                        <textarea class="otros-materiales-textarea" 
                                  id="textarea-otros-materiales"
                                  placeholder="Describe qué otros materiales necesitas...&#10;Ej: Bolsas, Etiquetas, Folletos, etc."
                                  onchange="updateOtrosMaterialesTexto()"
                                  onkeyup="updateOtrosMaterialesTexto()"></textarea>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">🌈 Selecciona Colores de Glitter</h2>
                <div class="colores-grid" id="coloresGrid"></div>
            </div>

            <div class="section">
                <h2 class="section-title">👤 Información Personal</h2>
                <div class="shipping-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label"><span style="font-family: 'Arial Black', Arial, sans-serif; font-weight: 900;">📅 Fecha</span></label>
                            <input type="date" class="form-input" id="fecha" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label"><span style="font-family: 'Arial Black', Arial, sans-serif; font-weight: 900;">🏪 Punto de venta</span></label>
                            <input type="text" class="form-input" id="puntoVenta" placeholder="Ej: Centro Comercial Santafé" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label"><span style="font-family: 'Arial Black', Arial, sans-serif; font-weight: 900;">👤 Nombre completo</span></label>
                            <input type="text" class="form-input" id="nombreCompleto" placeholder="Tu nombre completo" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label"><span style="font-family: 'Arial Black', Arial, sans-serif; font-weight: 900;">☎️ Teléfono</span></label>
                            <input type="tel" class="form-input" id="telefono" placeholder="Ej: 3001234567" required>
                        </div>
                    </div>
                </div>
            </div>

            <div class="summary-section" id="summarySection" style="display: none;">
                <h3 style="color: #E50695; text-align: center; margin-bottom: 20px;">📋 RESUMEN DE TU SOLICITUD</h3>
                <div class="summary-item">
                    <span class="summary-label">Total de paquetes:</span>
                    <span class="summary-value" id="summaryPaquetes">0</span>
                </div>
                <div class="summary-item" id="summaryKitsContainer" style="display: none;">
                    <span class="summary-label">Kits completos:</span>
                    <span class="summary-value" id="summaryKits">0</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Colores solicitados:</span>
                    <span class="summary-value" id="summaryColores">0</span>
                </div>
                <div class="summary-item" id="summaryProductosContainer" style="display: none;">
                    <span class="summary-label">Productos adicionales:</span>
                    <span class="summary-value" id="summaryProductos">0</span>
                </div>
            </div>

            <div class="button-status" id="buttonStatus">
                💡 Llena al menos un campo y los datos personales para activar el botón
            </div>

            <button class="whatsapp-btn" id="whatsappBtn" onclick="enviarWhatsApp()" disabled>
                📱 Enviar Solicitud por WhatsApp
            </button>
        </div>
    </div>

    <script>
        const motivos = [
            'Águila', 'Araña', 'Arcoíris', 'Barbie', 'Batman', 'Beso', 
            'Caballo', 'Carita feliz', 'Corazón Karol G', 'Delfín', 
            'Dinosaurio', 'Dragón', 'Elefante', 'Flash', 'Gato', 
            'Hongo', 'Huella', 'León', 'Mario', 'Mariposa', 
            'Medellín', 'Nacional', 'Notas musicales', 'Pirata', 
            'Planeta', 'Pluma', 'Pony', 'Sirenita', 'Sonic', 'Unicornio'
        ];

        const colores = [
            {name: 'Azul oscuro', emoji: '💙'},
            {name: 'Azul claro', emoji: '🩵'},
            {name: 'Azul brillante', emoji: '💙'},
            {name: 'Dorado', emoji: '💛'},
            {name: 'Rojo', emoji: '❤️'},
            {name: 'Verde', emoji: '💚'},
            {name: 'Fucsia', emoji: '🩷'},
            {name: 'Morado', emoji: '💜'},
            {name: 'Rosado', emoji: '💗'},
            {name: 'Café', emoji: '🤎'},
            {name: 'Negro', emoji: '🖤'},
            {name: 'Plateado', emoji: '🤍'},
            {name: 'Cobre', emoji: '🧡'},
            {name: 'Multicolor', emoji: '🌈'}
        ];

        // Mapeo de imágenes de los motivos
        const motivoImages = {
            'Águila': 'motivos/K_Aguila.png',
            'Araña': 'motivos/K_Arana.png',
            'Arcoíris': 'motivos/K_Arcoiris.png',
            'Barbie': 'motivos/K_Barbie.png',
            'Batman': 'motivos/K_Batman.png',
            'Beso': 'motivos/K_Beso.png',
            'Caballo': 'motivos/K_Caballo.png',
            'Carita feliz': 'motivos/K_Carita_Feliz.png',
            'Corazón Karol G': 'motivos/K_Crazon_CG.png',
            'Delfín': 'motivos/K_Delfin.png',
            'Dinosaurio': 'motivos/K_Dinosaurio.png',
            'Dragón': 'motivos/K_Dragon.png',
            'Elefante': 'motivos/K_Elefante.png',
            'Flash': 'motivos/K_Flash.png',
            'Gato': 'motivos/K_Gato.png',
            'Hongo': 'motivos/K_Hongo.png',
            'Huella': 'motivos/K_Huella.png',
            'León': 'motivos/K_Leon.png',
            'Mario': 'motivos/K_Mario.png',
            'Mariposa': 'motivos/K_Mariposa.png',
            'Medellín': 'motivos/K_Medellin.png',
            'Nacional': 'motivos/K_Nacional.png',
            'Notas musicales': 'motivos/K_Notas.png',
            'Pirata': 'motivos/K_Calavera.png',
            'Planeta': 'motivos/K_Paneta.png',
            'Pluma': 'motivos/K_Pluma.png',
            'Pony': 'motivos/K_Pony.png',
            'Sirenita': 'motivos/K_Sirena.png',
            'Sonic': 'motivos/K_Sonic.png',
            'Unicornio': 'motivos/K_Unicornio.png'
        };

        let selectedMotivos = {};
        let selectedColores = [];
        let motivosTemporada = [];
        let kitQuantity = 0;
        let productosAdicionales = {
            pegaMagica: false,
            transfer: false,
            publicidad: false,
            otrosMateriales: false
        };
        let otrosMaterialesTexto = '';
        let currentStep = 1;

        function handleImageError(img) {
            img.style.display = 'none';
            const placeholder = document.createElement('div');
            placeholder.className = 'image-placeholder';
            placeholder.textContent = getEmojiForMotivo(img.alt);
            img.parentNode.appendChild(placeholder);
        }

        function getEmojiForMotivo(motivo) {
            const emojis = {
                'Águila': '🦅', 'Araña': '🕷️', 'Arcoíris': '🌈', 'Barbie': '💄', 'Batman': '🦇',
                'Beso': '💋', 'Caballo': '🐎', 'Carita feliz': '😊', 'Corazón Karol G': '💖',
                'Delfín': '🐬', 'Dinosaurio': '🦕', 'Dragón': '🐲', 'Elefante': '🐘',
                'Flash': '⚡', 'Gato': '🐱', 'Hongo': '🍄', 'Huella': '🐾', 'León': '🦁',
                'Mario': '🎮', 'Mariposa': '🦋', 'Medellín': '🏙️', 'Nacional': '⚽',
                'Notas musicales': '🎵', 'Pirata': '☠️', 'Planeta': '🪐', 'Pluma': '🪶',
                'Pony': '🦄', 'Sirenita': '🧜‍♀️', 'Sonic': '💨', 'Unicornio': '🦄'
            };
            return emojis[motivo] || '🎨';
        }

        function updateProgressBar(step) {
            currentStep = step;
            
            for (let i = 1; i <= 4; i++) {
                const circle = document.getElementById(`step${i}`);
                const line = document.getElementById(`line${i}`);
                
                if (i < step) {
                    circle.className = 'step-circle completed';
                    if (line) line.className = 'step-line active';
                } else if (i === step) {
                    circle.className = 'step-circle active';
                } else {
                    circle.className = 'step-circle';
                    if (line) line.className = 'step-line';
                }
            }
        }

        function animateCounter(elementId, newValue) {
            const element = document.getElementById(elementId);
            element.classList.add('animate');
            element.textContent = newValue;
            
            setTimeout(() => {
                element.classList.remove('animate');
            }, 500);
        }

        function initializeApp() {
            createMotivosGrid();
            createColoresGrid();
            updateCounters();
            updateWhatsAppButton();
            setCurrentDate();
        }

        function setCurrentDate() {
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById('fecha').value = formattedDate;
        }

        function createMotivosGrid() {
            const grid = document.getElementById('motivosGrid');
            grid.innerHTML = '';
            
            motivos.forEach(motivo => {
                const item = document.createElement('div');
                item.className = 'motivo-item';
                
                const imageUrl = motivoImages[motivo];
                
                item.innerHTML = `
                    <div class="motivo-image-container" onclick="increaseQuantity('${motivo}')">
                        <img src="${imageUrl}" alt="${motivo}" class="motivo-image" 
                             onerror="handleImageError(this)">
                    </div>
                    <div class="motivo-content">
                        <div class="motivo-name">${motivo}</div>
                        <div class="quantity-controls">
                            <button class="btn-quantity" onclick="decreaseQuantity('${motivo}')">−</button>
                            <input type="number" class="quantity-input" id="qty-input-${motivo}" 
                                   value="0" min="0" max="999" 
                                   onchange="updateQuantityFromInput('${motivo}')"
                                   onkeypress="handleEnterKey(event, '${motivo}')">
                            <button class="btn-quantity" onclick="increaseQuantity('${motivo}')">+</button>
                        </div>
                    </div>
                `;
                grid.appendChild(item);
                selectedMotivos[motivo] = 0;
            });
        }

        function createColoresGrid() {
            const grid = document.getElementById('coloresGrid');
            grid.innerHTML = '';
            
            colores.forEach((color, index) => {
                const item = document.createElement('div');
                item.className = 'color-item';
                item.id = `color-${index}`;
                item.innerHTML = `
                    <div class="color-emoji">${color.emoji}</div>
                    <div>${color.name}</div>
                `;
                item.onclick = () => toggleColor(index);
                grid.appendChild(item);
            });
        }

        function increaseQuantity(motivo) {
            selectedMotivos[motivo]++;
            const input = document.getElementById(`qty-input-${motivo}`);
            const item = input.closest('.motivo-item');
            
            input.value = selectedMotivos[motivo];
            input.classList.add('animate');
            setTimeout(() => input.classList.remove('animate'), 400);
            
            // Marcar item como seleccionado
            if (selectedMotivos[motivo] > 0) {
                item.classList.add('selected');
            }
            
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
            clearAlerts();
        }

        function decreaseQuantity(motivo) {
            if (selectedMotivos[motivo] > 0) {
                selectedMotivos[motivo]--;
                const input = document.getElementById(`qty-input-${motivo}`);
                const item = input.closest('.motivo-item');
                
                input.value = selectedMotivos[motivo];
                input.classList.add('animate');
                setTimeout(() => input.classList.remove('animate'), 400);
                
                // Remover selección si llegó a 0
                if (selectedMotivos[motivo] === 0) {
                    item.classList.remove('selected');
                }
                
                updateCounters();
                updateSummary();
                updateWhatsAppButton();
                clearAlerts();
            }
        }

        function updateQuantityFromInput(motivo) {
            const input = document.getElementById(`qty-input-${motivo}`);
            const item = input.closest('.motivo-item');
            let value = parseInt(input.value) || 0;
            
            if (value < 0) value = 0;
            if (value > 999) value = 999;
            
            selectedMotivos[motivo] = value;
            input.value = value;
            
            // Actualizar estado visual
            if (value > 0) {
                item.classList.add('selected');
            } else {
                item.classList.remove('selected');
            }
            
            input.classList.add('animate');
            setTimeout(() => input.classList.remove('animate'), 400);
            
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
            clearAlerts();
        }

        function handleEnterKey(event, motivo) {
            if (event.key === 'Enter') {
                event.preventDefault();
                updateQuantityFromInput(motivo);
                event.target.blur();
            }
        }

        function updateKitQuantity() {
            const input = document.getElementById('kitQuantity');
            let value = parseInt(input.value) || 0;
            
            if (value < 0) value = 0;
            if (value > 5) value = 5;
            
            kitQuantity = value;
            input.value = value;
            
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function toggleColor(index) {
            const colorItem = document.getElementById(`color-${index}`);
            const colorIndex = selectedColores.indexOf(index);
            
            if (colorIndex === -1) {
                selectedColores.push(index);
                colorItem.classList.add('selected');
            } else {
                selectedColores.splice(colorIndex, 1);
                colorItem.classList.remove('selected');
            }
            
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function getTotalPaquetes() {
            const paquetesRegulares = Object.values(selectedMotivos).reduce((sum, qty) => sum + qty, 0);
            const paquetesTemporada = getTotalPaquetesTemporada();
            return paquetesRegulares + paquetesTemporada;
        }

        function getTotalKits() {
            return kitQuantity;
        }

        function getTotalColores() {
            return selectedColores.length;
        }

        function agregarMotivoTemporada() {
            const id = Date.now();
            const motivoData = { id: id, nombre: '', cantidad: 1 };
            motivosTemporada.push(motivoData);
            
            renderMotivosTemporada();
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function eliminarMotivoTemporada(id) {
            motivosTemporada = motivosTemporada.filter(motivo => motivo.id !== id);
            renderMotivosTemporada();
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function actualizarMotivoTemporada(id, campo, valor) {
            const motivo = motivosTemporada.find(m => m.id === id);
            if (motivo) {
                if (campo === 'cantidad') {
                    valor = Math.max(1, parseInt(valor) || 1);
                }
                motivo[campo] = valor;
                updateCounters();
                updateSummary();
                updateWhatsAppButton();
            }
        }

        function renderMotivosTemporada() {
            const container = document.getElementById('motivosTemporadaContainer');
            container.innerHTML = '';
            
            motivosTemporada.forEach(motivo => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'temporada-item';
                itemDiv.innerHTML = `
                    <div class="temporada-inputs">
                        <input type="text" 
                               class="temporada-name-input" 
                               placeholder="Ej: Kuromi, My Melody, Stitch..." 
                               value="${motivo.nombre}"
                               onchange="actualizarMotivoTemporada(${motivo.id}, 'nombre', this.value)"
                               onkeyup="actualizarMotivoTemporada(${motivo.id}, 'nombre', this.value)">
                        <div class="temporada-quantity">
                            <span style="color: #E50695; font-weight: bold;">Paquetes:</span>
                            <input type="number" 
                                   class="temporada-quantity-input" 
                                   min="1" max="999" 
                                   value="${motivo.cantidad}"
                                   onchange="actualizarMotivoTemporada(${motivo.id}, 'cantidad', this.value)">
                        </div>
                    </div>
                    <button type="button" class="btn-remove-temporada" onclick="eliminarMotivoTemporada(${motivo.id})">
                        ✕
                    </button>
                `;
                container.appendChild(itemDiv);
            });
        }

        function getTotalPaquetesTemporada() {
            return motivosTemporada.reduce((sum, motivo) => {
                return sum + (motivo.cantidad || 0);
            }, 0);
        }

        function toggleProductoAdicional(producto) {
            productosAdicionales[producto] = !productosAdicionales[producto];
            
            const toggle = document.getElementById(`toggle-${producto.replace('M', '-m')}`);
            const label = document.getElementById(`label-${producto.replace('M', '-m')}`);
            
            toggle.checked = productosAdicionales[producto];
            label.textContent = productosAdicionales[producto] ? 'SÍ' : 'NO';
            label.classList.toggle('active', productosAdicionales[producto]);
            
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function toggleOtrosMateriales() {
            productosAdicionales.otrosMateriales = !productosAdicionales.otrosMateriales;
            
            const toggle = document.getElementById('toggle-otros-materiales');
            const label = document.getElementById('label-otros-materiales');
            const inputContainer = document.getElementById('otros-materiales-input');
            
            toggle.checked = productosAdicionales.otrosMateriales;
            label.textContent = productosAdicionales.otrosMateriales ? 'SÍ' : 'NO';
            label.classList.toggle('active', productosAdicionales.otrosMateriales);
            
            if (productosAdicionales.otrosMateriales) {
                inputContainer.style.display = 'block';
                setTimeout(() => {
                    document.getElementById('textarea-otros-materiales').focus();
                }, 300);
            } else {
                inputContainer.style.display = 'none';
                otrosMaterialesTexto = '';
                document.getElementById('textarea-otros-materiales').value = '';
            }
            
            updateCounters();
            updateSummary();
            updateWhatsAppButton();
        }

        function updateOtrosMaterialesTexto() {
            const textarea = document.getElementById('textarea-otros-materiales');
            otrosMaterialesTexto = textarea.value.trim();
            updateSummary();
            updateWhatsAppButton();
        }

        function updateCounters() {
            const totalPaquetes = getTotalPaquetes();
            const totalKits = getTotalKits();
            const totalColores = getTotalColores();
            const productosSeleccionados = Object.values(productosAdicionales).filter(selected => selected === true).length;
            const totalItems = totalColores + productosSeleccionados + totalKits;
            
            animateCounter('totalPaquetes', totalPaquetes);
            animateCounter('totalKits', totalKits);
            animateCounter('totalItems', totalItems);
        }

        function updateSummary() {
            const totalPaquetes = getTotalPaquetes();
            const totalKits = getTotalKits();
            const hasTemporada = motivosTemporada.some(motivo => motivo.nombre.trim() !== '' && motivo.cantidad > 0);
            const hasColores = selectedColores.length > 0;
            const hasProductosAdicionales = Object.values(productosAdicionales).some(selected => selected === true);
            
            if (totalPaquetes > 0 || totalKits > 0 || hasTemporada || hasColores || hasProductosAdicionales) {
                document.getElementById('summaryPaquetes').textContent = totalPaquetes;
                
                // Mostrar kits si hay alguno
                if (totalKits > 0) {
                    document.getElementById('summaryKits').textContent = totalKits;
                    document.getElementById('summaryKitsContainer').style.display = 'flex';
                } else {
                    document.getElementById('summaryKitsContainer').style.display = 'none';
                }
                
                document.getElementById('summaryColores').textContent = getTotalColores();
                
                // Mostrar productos adicionales si hay alguno
                if (hasProductosAdicionales) {
                    let productosTexto = [];
                    if (productosAdicionales.pegaMagica) {
                        productosTexto.push('✅ Pega Mágica');
                    }
                    if (productosAdicionales.transfer) {
                        productosTexto.push('✅ Transfer');
                    }
                    if (productosAdicionales.publicidad) {
                        productosTexto.push('✅ Publicidad');
                    }
                    if (productosAdicionales.otrosMateriales) {
                        const textoOtros = otrosMaterialesTexto ? ` (${otrosMaterialesTexto.substring(0, 30)}${otrosMaterialesTexto.length > 30 ? '...' : ''})` : '';
                        productosTexto.push(`✅ Otros Materiales${textoOtros}`);
                    }
                    document.getElementById('summaryProductos').textContent = productosTexto.join(', ');
                    document.getElementById('summaryProductosContainer').style.display = 'flex';
                } else {
                    document.getElementById('summaryProductosContainer').style.display = 'none';
                }
                
                document.getElementById('summarySection').style.display = 'block';
            } else {
                document.getElementById('summarySection').style.display = 'none';
            }
        }

        function validateRequiredFields() {
            const fecha = document.getElementById('fecha').value.trim();
            const puntoVenta = document.getElementById('puntoVenta').value.trim();
            const nombreCompleto = document.getElementById('nombreCompleto').value.trim();
            const telefono = document.getElementById('telefono').value.trim();
            
            return fecha && puntoVenta && nombreCompleto && telefono;
        }

        function hasValidSelections() {
            const hasMotivos = getTotalPaquetes() > 0;
            const hasKits = getTotalKits() > 0;
            const hasTemporada = motivosTemporada.some(motivo => motivo.nombre.trim() !== '' && motivo.cantidad > 0);
            const hasColores = selectedColores.length > 0;
            const hasProductosAdicionales = Object.values(productosAdicionales).some(selected => selected === true);
            
            return hasMotivos || hasKits || hasTemporada || hasColores || hasProductosAdicionales;
        }

        function updateWhatsAppButton() {
            const btn = document.getElementById('whatsappBtn');
            const statusDiv = document.getElementById('buttonStatus');
            
            const hasRequiredFields = validateRequiredFields();
            const hasValidSelection = hasValidSelections();
            
            const otrosMaterialesCompleto = !productosAdicionales.otrosMateriales || 
                                          (productosAdicionales.otrosMateriales && otrosMaterialesTexto.trim() !== '');
            
            const canSend = hasValidSelection && hasRequiredFields && otrosMaterialesCompleto;
            
            btn.disabled = !canSend;
            
            if (!hasValidSelection && !hasRequiredFields) {
                statusDiv.textContent = '💡 Selecciona al menos un producto y completa tus datos personales';
                statusDiv.className = 'button-status incomplete';
            } else if (!hasValidSelection) {
                statusDiv.textContent = '⚠️ Selecciona al menos un motivo, kit, color o producto adicional';
                statusDiv.className = 'button-status incomplete';
            } else if (!hasRequiredFields) {
                statusDiv.textContent = '⚠️ Completa todos los campos de información personal';
                statusDiv.className = 'button-status incomplete';
            } else if (!otrosMaterialesCompleto) {
                statusDiv.textContent = '⚠️ Describe qué otros materiales necesitas o desactiva la opción';
                statusDiv.className = 'button-status incomplete';
            } else {
                statusDiv.textContent = '✅ ¡Todo listo! Puedes enviar tu solicitud';
                statusDiv.className = 'button-status ready';
            }
        }

        function showAlert(message, type) {
            const alertsContainer = document.getElementById('alerts');
            alertsContainer.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            
            // Efecto shake para alertas de error
            if (type === 'danger') {
                alertsContainer.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => alertsContainer.style.animation = '', 500);
            }
        }

        function clearAlerts() {
            document.getElementById('alerts').innerHTML = '';
        }

        function enviarWhatsApp() {
            if (!hasValidSelections()) {
                showAlert('❌ Debes seleccionar al menos un producto', 'danger');
                return;
            }

            if (!validateRequiredFields()) {
                showAlert('❌ Por favor completa todos los campos obligatorios', 'danger');
                return;
            }

            const motivosTemporadaValidos = motivosTemporada.filter(motivo => motivo.nombre.trim() !== '');
            if (motivosTemporada.length > motivosTemporadaValidos.length) {
                showAlert('❌ Por favor completa el nombre de todos los motivos de temporada o elimina los vacíos', 'danger');
                return;
            }

            if (productosAdicionales.otrosMateriales && otrosMaterialesTexto.trim() === '') {
                showAlert('❌ Por favor describe qué otros materiales necesitas o desactiva la opción', 'danger');
                return;
            }

            const fecha = document.getElementById('fecha').value;
            const puntoVenta = document.getElementById('puntoVenta').value.trim();
            const nombreCompleto = document.getElementById('nombreCompleto').value.trim();
            const telefono = document.getElementById('telefono').value.trim();

            let mensaje = `📦 *SOLICITUD DE MATERIAL KOKITO STAR* 📦\n`;
            mensaje += `🏪 *PUNTO DE VENTA: ${puntoVenta.toUpperCase()}*\n\n`;
            
            mensaje += "👤 *INFORMACIÓN PERSONAL:*\n";
            mensaje += `📅 *Fecha:* ${fecha}\n`;
            mensaje += `🏪 *Punto de venta:* ${puntoVenta}\n`;
            mensaje += `👤 *Nombre:* ${nombreCompleto}\n`;
            mensaje += `☎️ *Teléfono:* ${telefono}\n\n`;
            
            // Kits completos
            if (kitQuantity > 0) {
                mensaje += "🎁 *KITS COMPLETOS:*\n";
                mensaje += `• Kit Completo Kokito Star: ${kitQuantity} unidad${kitQuantity > 1 ? 'es' : ''}\n`;
                mensaje += `• Total de kits: ${kitQuantity}/5 (máximo permitido)\n\n`;
            }
            
            // Motivos regulares
            const motivosRegularesSeleccionados = Object.keys(selectedMotivos).filter(motivo => selectedMotivos[motivo] > 0);
            if (motivosRegularesSeleccionados.length > 0) {
                mensaje += "🎨 *MOTIVOS REGULARES:*\n";
                motivosRegularesSeleccionados.forEach(motivo => {
                    const cantidad = selectedMotivos[motivo];
                    mensaje += `• ${motivo}: ${cantidad} paquete${cantidad > 1 ? 's' : ''}\n`;
                });
                mensaje += "\n";
            }
            
            // Motivos de temporada
            if (motivosTemporadaValidos.length > 0) {
                mensaje += "✨ *MOTIVOS DE TEMPORADA:*\n";
                motivosTemporadaValidos.forEach(motivo => {
                    mensaje += `• ${motivo.nombre}: ${motivo.cantidad} paquete${motivo.cantidad > 1 ? 's' : ''}\n`;
                });
                mensaje += "\n";
            }
            
            // Productos adicionales
            const hasProductosAdicionales = Object.values(productosAdicionales).some(selected => selected === true);
            if (hasProductosAdicionales) {
                mensaje += "🧪 *PRODUCTOS ADICIONALES:*\n";
                if (productosAdicionales.pegaMagica) {
                    mensaje += `• ✅ Pega Mágica\n`;
                }
                if (productosAdicionales.transfer) {
                    mensaje += `• ✅ Transfer\n`;
                }
                if (productosAdicionales.publicidad) {
                    mensaje += `• ✅ Publicidad\n`;
                }
                if (productosAdicionales.otrosMateriales) {
                    mensaje += `• ✅ Otros Materiales: ${otrosMaterialesTexto}\n`;
                }
                mensaje += "\n";
            }
            
            // Resumen solo si hay motivos o kits
            const totalPaquetes = getTotalPaquetes();
            if (totalPaquetes > 0 || kitQuantity > 0 || motivosTemporadaValidos.length > 0) {
                mensaje += `📊 *RESUMEN:*\n`;
                if (totalPaquetes > 0) {
                    mensaje += `• Total paquetes de motivos: ${totalPaquetes}\n`;
                    mensaje += `• Total stencils: ${totalPaquetes * 30}\n`;
                }
                if (kitQuantity > 0) {
                    mensaje += `• Kits completos: ${kitQuantity}\n`;
                }
                mensaje += "\n";
            }
            
            // Colores solo si hay algunos seleccionados
            if (selectedColores.length > 0) {
                mensaje += "🌈 *COLORES DE GLITTER SOLICITADOS:*\n";
                selectedColores.forEach(index => {
                    mensaje += `${colores[index].emoji} ${colores[index].name}\n`;
                });
                mensaje += "\n";
            }
            
            mensaje += "¡Gracias por tu solicitud! 🎨✨";
            
            // Enviar por WhatsApp
            const numeroWhatsApp = "573004081897";
            const urlWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensaje)}`;
            window.open(urlWhatsApp, '_blank');
            
            showAlert('✅ ¡Solicitud enviada por WhatsApp! Pronto recibirás respuesta 🎉', 'success');
        }

        // Inicializar la aplicación
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            
            // Event listeners para validar formulario en tiempo real
            const formInputs = ['fecha', 'puntoVenta', 'nombreCompleto', 'telefono'];
            formInputs.forEach(id => {
                const input = document.getElementById(id);
                input.addEventListener('input', function() {
                    updateWhatsAppButton();
                    updateSummary();
                });
            });
            
            // Event listener para el kit quantity
            document.getElementById('kitQuantity').addEventListener('input', updateKitQuantity);
        });
    </script>
</body>
</html>
